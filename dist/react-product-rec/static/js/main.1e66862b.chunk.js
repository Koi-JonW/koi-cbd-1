(this["webpackJsonpproduct-rec-embed"]=this["webpackJsonpproduct-rec-embed"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(6),c=n.n(i),o=n(2),s=n(1),l=function(e){var t=e.size,n=e.children;return r.a.createElement("div",{className:"k-inner k-inner--".concat(t)},n)},u=function(e){var t=e.size,n=e.tag,a=e.children,i="k-headline k-headline--".concat(t);return"h1"===n?r.a.createElement("h1",{className:i},a):r.a.createElement("h3",{className:i},a)},d=function(e){var t=e.children;return r.a.createElement("div",{className:"k-hero--bigtext"},r.a.createElement("p",null,t))},m=function(e){var t=e.variant,n=e.anchor,a=e.href,i=e.title,c=e.target,o=e.children,s=e.disabled,l=e.onClick,u="k-button k-button--".concat(t);return!1!==n?r.a.createElement("a",{href:a,title:i,className:u,target:c},o):r.a.createElement("button",{type:"button",className:u,disabled:s,onClick:l},o)},h=n(3),f=n(4),p=function(e,t,n){var a=t.indexOf(e),r=Object(f.a)(t);a>-1?r.splice(a,1):r.push(e),n(r)},g=function(){for(var e=[],t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach((function(t){var n=typeof t;if("string"===n)e.push(t);else if(Array.isArray(t)&&t.length)e.push(t.join(" "));else if("object"===n)for(var a in t)hasOwnProperty.call(t,a)&&t[a]&&e.push(a)})),e.join(" ")},b=function(){return{width:window.innerWidth,height:window.innerHeight}},k=function(e){var t,n=e.src,i=e.onLoad,c=e.className,s=Object(a.useState)(!1),l=Object(o.a)(s,2),u=l[0],d=l[1];Object(a.useEffect)((function(){var e=new Image;e.onload=function(){i(),d(!0)},e.src=n}),[]);var m=g((t={},Object(h.a)(t,c,!0),Object(h.a)(t,"k-image-fill",!0),Object(h.a)(t,"k-image-loaded",u),t));return r.a.createElement("div",{style:{backgroundImage:"url(".concat(n,")")},className:m})};k.defaultProps={onLoad:function(){},className:""};var y=k;function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var E={hide:{opacity:0,y:40},show:{opacity:1,y:0}},w={initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0}},O={delay:.3,opacity:{ease:"linear",duration:.5},y:{type:"spring",duration:.5}},N={initial:{opacity:0,y:50},animate:{opacity:1,y:0}},j={duration:.4,ease:"easeInOut"},x={initial:function(e){var t={transition:j};return"none"===e?(t.opacity=0,t.transition={ease:"linear",duration:1}):t.x="next"===e?window.innerWidth:-window.innerWidth,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{opacity:1})},animate:{x:0,zIndex:99,transition:j},exit:function(e){return{x:"next"===e?-window.innerWidth:window.innerWidth,zIndex:0,transition:j}}},C=function(e){var t=e.direction,n=e.screenSize,i=e.setMinHeight,c=e.panelType,o=e.PanelBg,u=e.children,d=Object(a.createRef)(),m=Object(a.useRef)(window.innerHeight);return Object(a.useEffect)((function(){var e=d.current.offsetHeight;m.current=function(e){return e>window.innerHeight?e:window.innerHeight}(e),i(e)}),[n]),r.a.createElement(s.b.div,{className:"k-fshero--panel k-fshero--".concat(c),style:{height:m.current},variants:x,custom:t,initial:"initial",animate:"animate",exit:"exit"},r.a.createElement("div",{className:"k-fshero--centered",ref:d},r.a.createElement(l,{size:"md"},r.a.createElement(s.b.div,{initial:"initial",animate:"animate",variants:N,transition:O},u))),o)};C.defaultProps={PanelBg:""};var S=C,I=["intro","reason","feature","result"],P={default:"Why are you looking for CBD?",pet:"Why are you looking for CBD for your pet?"},B={default:[{name:"Stress / Anxiety",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/stress-icon.png"},{name:"Sleep",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/sleep-icon.png"},{name:"Energy",icon:"https://koicbd.com/wp-content/uploads/cbd-for-energy.png"},{name:"Aches & Pains",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/aches-icon.png"},{name:"Skincare",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/skincare-icon.png"},{name:"Relaxation",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/relax-icon.png"},{name:"General Wellness",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/wellness-icon.png"}],pet:[{name:"Stress / Anxiety",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/stress-icon.png"},{name:"Aches & Pains",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/aches-icon.png"},{name:"General Wellness",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/wellness-icon.png"}]},D={default:["Apply to Skin","Vape","Take Orally"],pet:["Convenience","Can be added to pet food or treats"]},K={default:{"Tincture - Flavored":{id:[205342,205366,205491],reasons:[0,1,2,5,6],features:[2],url:"/cbd-tinctures?flavored=true",description:"Find out why people around the world are using Koi Naturals full-spectrum CBD oils every day to restore balance to their lives.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/results-fpo.jpg",weights:{}},"Tincture - Unflavored":{id:[205502],reasons:[0,1,2,5,6],features:[2],url:"/product/koi-naturals-natural/",description:"Find out why people around the world are using Koi Naturals full-spectrum CBD oils every day to restore balance to their lives.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-natural.jpg",weights:{}},"Gummies - Regular or Sour":{id:[30240],reasons:[0,1,5,6],features:[2],url:"/product/cbd-gummies/",description:"CBD edibles with delectable flavors provide an even consistency of CBD to restore balance naturally.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-edible.jpg",weights:{}},"Wellness Shots":{id:[559149],reasons:[0,1,2,5,6],features:[2],url:"/product/koi-cbd-shots/",description:"Koi Wellness Shots offer the highest-quality hemp extract available, with each delivering 25mg of CBD per 2.5-ounce bottle. For a tasty wellness shot, try Watermelon or Raspberry Punch. Each is perfectly designed to bring balance to your day in the most convenient and refreshing way. If you\u2019re searching for a great night\u2019s sleep, our Peach Iced Tea flavor is what you\u2019re looking for. It carries 25mg of CBD goodness combined with melatonin to calm your mind and body so that you can get the rest you\u2019re looking for.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-lotion.jpg",weights:{reasons:{2:1.5}}},"Vape Juice - Flavored":{id:[30193,30198,30202,30211,30217],reasons:[0,5],features:[1],url:"/cbd-vape?flavored=true",description:"Enjoy an even distribution of CBD throughout your day. Vape them on their own or add to other e-liquids. Available in 7 awesome flavors.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-vape.jpg",weights:{features:{1:4}}},"Vape Juice - Unflavored":{id:[30207],sku:"",reasons:[0,5],features:[1],url:"/product/white-koi-cbd/",description:"Enjoy an even distribution of CBD throughout your day. Vape them on their own or add to other e-liquids.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-natural-vape.jpg",weights:{features:{1:4}}},"Healing Balm":{id:[424649,503515],reasons:[3],features:[0],url:"/cbd-topicals?balm_only=true",description:"Relax and rejuvenate with all-purpose CBD topicals. Perfect for promoting beautiful, naturally healthy skin.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-balm.jpg",weights:{category:1,reasons:{3:1.5}}},"Koi Lotion":{id:[559149],reasons:[4],features:[0],url:"/product/lavender-koi/",description:"Relax and rejuvenate with all-purpose CBD topicals. Perfect for promoting beautiful, naturally healthy skin.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-lotion.jpg",weights:{}}},pet:{"Pet Spray":{id:[168056],sku:"PETSPRY",reasons:[],features:[1],url:"/product/koi-naturals-pet/",description:"Specially formulated to give your pet nutrition, combined with all the benefits of full-spectrum CBD.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-spray.jpg",weights:{}},"Soft Pet Chews":{id:[116376],sku:"KPTSCHEWS",reasons:[],features:[0],url:"/product/koi-cbd-soft-chews/",description:"Specially formulated to give your pet nutrition, combined with all the benefits of full-spectrum CBD.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-chews.jpg",weights:{}}}},W=r.a.createElement(y,{className:"k-fshero--intro-bg",src:"https://cdn2.hubspot.net/hubfs/5273025/mag/product-finder-hero.jpg"}),z=function(e){var t=e.direction,n=e.setMinHeight,a=e.screenSize,i=e.onPrimaryClick,c=e.onSecondaryClick;return r.a.createElement(S,{direction:t,screenSize:a,setMinHeight:n,panelType:"intro",PanelBg:W},r.a.createElement(u,{size:"lg"},"Welcome To The Koi CBD Product Finder"),r.a.createElement(d,null,"I'm interested in CBD products for..."),r.a.createElement("div",{className:"k-hero--action"},r.a.createElement(m,{anchor:!1,variant:"primary",onClick:i},"Myself or a Loved One \u2192"),r.a.createElement(m,{anchor:!1,variant:"secondary",onClick:c},"My Pet \u2192")))};z.defaultProps={onPrimaryClick:function(){},onSecondaryClick:function(){}};var M=z,H=function(e){var t=e.disabled,n=e.onNextClick,a=e.children;return r.a.createElement("div",{className:"k-fshero--btn"},r.a.createElement(s.b.div,{variants:E,initial:!1,animate:t?"hide":"show"},r.a.createElement(m,{anchor:!1,variant:"primary",disabled:t,onClick:n},a)))},R=function(e){var t=e.direction,n=e.mode,i=e.screenSize,c=e.reasons,o=e.setReasons,s=e.setMinHeight,l=e.onNextClick,d=Object(a.useRef)(null);return r.a.createElement(S,{direction:t,screenSize:i,setMinHeight:s,panelType:"reason"},r.a.createElement(u,{size:"md"},P[n]),r.a.createElement("ul",{className:"k-reasons--list"},B[n].map((function(e,t){return r.a.createElement("li",{key:t,className:g({"k-active":c.indexOf(e.name)>-1})},r.a.createElement("label",{htmlFor:"reason-".concat(t)},r.a.createElement("input",{id:"reason-".concat(t),type:"checkbox",checked:c.indexOf(e.name)>-1,onFocus:function(e){return n=t,d.current=n;var n},onChange:function(t){return p(e.name,c,(function(e){return o(e)}))}}),r.a.createElement("div",{className:"k-reason--icon"},r.a.createElement("figure",null,r.a.createElement("span",{className:"k-reason--icon-bg"}),r.a.createElement("span",{className:"k-reason--icon-img",style:{backgroundImage:"url(".concat(e.icon,")")}}))),r.a.createElement("div",{className:"k-reason--title"},r.a.createElement("h5",null,e.name))))}))),r.a.createElement(H,{disabled:0===c.length,onNextClick:l},"Next \u2192"))};R.defaultProps={setReasons:function(){},onNextClick:function(){}};var T=R,F=function(e){var t=e.direction,n=e.mode,a=e.screenSize,i=e.features,c=e.setFeatures,o=e.setMinHeight,s=e.onNextClick;return r.a.createElement(S,{direction:t,screenSize:a,setMinHeight:o,panelType:"feature"},r.a.createElement(u,{size:"md"},"How do you want to use CBD?"),r.a.createElement("ul",{className:"k-reasons--list"},D[n].map((function(e,t){return r.a.createElement("li",{key:t,className:g({"k-active":i.indexOf(e)>-1})},r.a.createElement("label",{htmlFor:"feature-".concat(t)},r.a.createElement("input",{id:"feature-".concat(t),type:"checkbox",checked:i.indexOf(e)>-1,onChange:function(t){return p(e,i,(function(e){return c(e)}))}}),r.a.createElement("div",{className:"k-feature--icon"},r.a.createElement("span",null,"0",t+1)),r.a.createElement("div",{className:"k-reason--title"},r.a.createElement("h5",null,e))))}))),r.a.createElement(H,{disabled:0===i.length,onNextClick:s},"Get Results \u2192"))};F.defaultProps={onNextClick:function(){}};var q=F,A=function(e,t,n){return t.map((function(t){var a=e.indexOf(t),r=n.indexOf(a);return r>-1?a:r})).filter((function(e){return e>-1}))},L=function(e,t,n,a){var r=1,i=t[e].weights[a];if(i&&n.length>0){var c=n.map((function(e){var t=e.toString();return i[t]}));r=c.reduce((function(e,t){return e+t}),0)/c.length}return r},V=function(e){var t=e.direction,n=e.mode,i=e.reasons,c=e.screenSize,d=e.features,h=e.setMinHeight,p=Object(a.useRef)(),g=Object(a.useRef)([]),k=Object(a.useRef)(function(){var e=document.getElementById("k-products-data");return JSON.parse(e.textContent)}()),v=Object(a.createRef)();Object(a.useEffect)((function(){h(p.current.offsetHeight)}),[c]);var E=function(e,t,n,a){var r=K[a],i=B[a].map((function(e){return e.name})),c=D[a],s=Object.keys(r),l=s.reduce((function(e,a){var o=r[a].reasons,s=r[a].features,l=A(i,t,o),u=A(c,n,s),d=L(a,r,l,"reasons"),m=L(a,r,u,"features"),h=l.length*d,f=u.length*m;return e[a]=(h+f)/(o.length+s.length),e}),{}),u=Object(f.a)(s);u.sort((function(e,t){return l[t]-l[e]}));var d=u.reduce((function(e,t,n){return 0===n?e:[].concat(Object(f.a)(e),Object(f.a)(r[t].id))}),[]),m=r[u[0]],h=m.description,p=m.url,g=m.image;return{hero:{heading:u[0],description:h,url:p,image:g},products:d.map((function(t){var n=e.filter((function(e){return t===e.ID}));return Object(o.a)(n,1)[0]}))}}(k.current,i,d,n),w=E.hero,O=E.products,N=w.heading.includes("Vape"),j=O.filter((function(e){return!e.Name.includes("Vape")})),C=function(){var e=g.current,t=0,n=0,a=function(){var e=b().width,t={width:1},n={width:0,cardMinWidth:.765},a={width:580,cardMinWidth:.405},r={width:767,cardMinWidth:.333},i={width:992,cardMinWidth:.225};switch(!0){case e<a.width:return t.width/n.cardMinWidth;case e>a.width&&e<r.width:return t.width/a.cardMinWidth;case e>r.width&&e<i.width:return t.width/r.cardMinWidth;case e>i.width:return t.width/i.cardMinWidth;default:return console.warn("default case"),1}}();return e.forEach((function(e){t=e.offsetWidth,n+=e.offsetWidth})),-(n-=t*a)}();return r.a.createElement(s.b.div,{className:"k-fshero--panel k-fshero--result",variants:x,custom:t,initial:"initial",animate:"animate",exit:"exit"},r.a.createElement("div",{className:"k-fshero--result-parent",ref:p},w&&r.a.createElement("div",{className:"k-fshero--results-hero"},r.a.createElement("div",{className:"k-resulthero--top-img"},r.a.createElement("figure",null,r.a.createElement(y,{className:"k-fshero--intro-bg",src:w.image}))),r.a.createElement("div",{className:"k-resulthero--top-info"},r.a.createElement("div",{className:"k-resulthero--top-liner"},r.a.createElement("small",null,"Your Results Are In:"),r.a.createElement(u,{tag:"h1",size:"md"},w.heading),r.a.createElement("p",null,w.description),r.a.createElement("div",{className:"k-resulthero--top-btn"},r.a.createElement(m,{variant:"primary",anchor:!0,href:w.url},"Shop Now \u2192"),r.a.createElement("span",null,"Scroll For More")),r.a.createElement("small",{className:"k-resulthero--disclaimer"},"FDA Disclaimer: This product is not intended to diagnose, treat, cure or prevent any disease.")))),O&&r.a.createElement("div",{className:"k-fshero--results-body"},r.a.createElement(l,{size:"md"},r.a.createElement(u,{tag:"h1",size:"md"},"Based on your responses, we recommend")),r.a.createElement(l,{size:"md"},r.a.createElement("div",{className:"k-fsresults--related",ref:v},r.a.createElement(s.b.div,{className:"k-fsresults--slider",drag:"x",dragConstraints:{right:0,left:C}},N&&O.map((function(e,t){return r.a.createElement("div",{key:t,className:"k-productcard",ref:function(e){g.current[t]=e}},r.a.createElement("div",{className:"k-productcard--liner"},r.a.createElement("figure",{className:"k-figure"},r.a.createElement("img",{src:e.Images.split(",")[0],alt:e.Name})),r.a.createElement("div",{className:"k-productcard--title"},r.a.createElement("h3",{className:"k-headline k-headline--fake k-weight--lg"},e.Name)),r.a.createElement("div",{className:"k-productcard--action"},r.a.createElement("a",{href:e.LinkToProduct,className:"k-button k-button--default"},"Buy Now"))))})),!N&&j.map((function(e,t){return r.a.createElement("div",{key:t,className:"k-productcard",ref:function(e){g.current[t]=e}},r.a.createElement("div",{className:"k-productcard--liner"},r.a.createElement("figure",{className:"k-figure"},r.a.createElement("img",{src:e.Images.split(",")[0],alt:e.Name})),r.a.createElement("div",{className:"k-productcard--title"},r.a.createElement("h3",{className:"k-headline k-headline--fake k-weight--lg"},e.Name)),r.a.createElement("div",{className:"k-productcard--description"},r.a.createElement("p",null,e.description)),r.a.createElement("div",{className:"k-productcard--action"},r.a.createElement("a",{href:e.LinkToProduct,className:"k-button k-button--default"},"Buy Now"))))}))))))))},J=function(e){var t=e.activeIndex,n=e.panelType,a=e.onBackClick,i=e.onStartOver;return r.a.createElement(s.b.div,{variants:w,transition:O,initial:"initial",animate:"animate",exit:"exit"},r.a.createElement("div",{className:"k-fshero--fixed"},r.a.createElement(l,{size:"lg"},r.a.createElement(s.a,null,"result"!==n&&r.a.createElement(s.b.div,{key:"btns-initial",className:"k-fshero--fixed-btns",initial:{opacity:0,y:-50},animate:{opacity:1,y:0,position:"relative"},exit:{opacity:0,y:-50,position:"absolute"},transition:O},r.a.createElement("button",{type:"button",className:"k-fshero--back",onClick:a},"\u2190 Back"),r.a.createElement("div",{className:"k-fshero--current"},r.a.createElement("span",null,"0",t)," / ",r.a.createElement("span",null,"02")))),r.a.createElement(s.a,null,"result"===n&&r.a.createElement(s.b.div,{key:"btns-result",className:"k-fshero--fixed-btns",initial:{opacity:0,y:50},animate:{opacity:1,y:0,position:"relative"},exit:{opacity:0,y:-50,position:"absolute"},transition:O},r.a.createElement("button",{type:"button",className:"k-fshero--back",onClick:i},"\u2190 Start Over"))))))},G=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],i=t[1],c=Object(a.useState)("intro"),l=Object(o.a)(c,2),u=l[0],d=l[1],m=Object(a.useState)("default"),h=Object(o.a)(m,2),f=h[0],p=h[1],g=Object(a.useState)([]),k=Object(o.a)(g,2),y=k[0],v=k[1],E=Object(a.useState)([]),w=Object(o.a)(E,2),O=w[0],N=w[1],j=Object(a.useState)("none"),x=Object(o.a)(j,2),C=x[0],S=x[1],P=Object(a.useState)("none"),B=Object(o.a)(P,2),D=B[0],K=B[1],W=Object(a.useState)(b()),z=Object(o.a)(W,2),H=z[0],R=z[1],F=Object(a.useMemo)((function(){return I.indexOf(u)}),[u]),A=Object(a.useMemo)((function(){return F>0&&F<=I.length}),[F]),L=Object(a.useRef)(null);Object(a.useEffect)((function(){n||(window.addEventListener("load",(function(){return i(!0)})),window.addEventListener("resize",(function(){L.current&&window.clearTimeout(L.current),L.current=window.setTimeout((function(){R(b())}),350)})))}),[]);var G=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"next";e.preventDefault(),K(n),d(t)},U=function(e,t){p(t),G(e,"reason","next")},Y={direction:D,mode:f,setMinHeight:S,screenSize:H};return r.a.createElement("section",{className:"k-fshero k-fshero-panel-".concat(u," k-fshero-mode-").concat(f),style:{minHeight:C,backgroundImage:"url(".concat("https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/koi-product-rec-bg.jpg",")")}},A&&r.a.createElement(J,{key:"controls",activeIndex:F,panelType:u,onStartOver:function(e){return function(e){e.preventDefault(),v([]),N([]),p("default"),G(e,"intro","prev")}(e)},onBackClick:function(e){return G(e,I[F-1],"prev")}}),n&&r.a.createElement(s.a,{custom:D},"intro"===u&&r.a.createElement(M,Object.assign({},Y,{key:"intro",onPrimaryClick:function(e){return U(e,"default")},onSecondaryClick:function(e){return U(e,"pet")}}))||"reason"===u&&r.a.createElement(T,Object.assign({},Y,{key:"reason",reasons:y,setReasons:v,onNextClick:function(e){return G(e,"feature")}}))||"feature"===u&&r.a.createElement(q,Object.assign({},Y,{key:"feature",features:O,setFeatures:N,onNextClick:function(e){return G(e,"result")}}))||"result"===u&&r.a.createElement(V,Object.assign({},Y,{key:"result",reasons:y,features:O}))))},U=(n(12),document.getElementById("k-product-rec-root"));c.a.render(r.a.createElement(G,null),U)},7:function(e,t,n){e.exports=n(13)}},[[7,1,2]]]);
//# sourceMappingURL=main.1e66862b.chunk.js.map