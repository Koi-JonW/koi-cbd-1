(this["webpackJsonpproduct-rec-embed"]=this["webpackJsonpproduct-rec-embed"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(6),s=n.n(i),c=n(2),o=n(1),l=function(e){var t=e.size,n=e.children;return r.a.createElement("div",{className:"k-inner k-inner--".concat(t)},n)},u=function(e){var t=e.size,n=e.tag,a=e.children,i="k-headline k-headline--".concat(t);return"h1"===n?r.a.createElement("h1",{className:i},a):r.a.createElement("h3",{className:i},a)},m=function(e){var t=e.children;return r.a.createElement("div",{className:"k-hero--bigtext"},r.a.createElement("p",null,t))},d=function(e){var t=e.variant,n=e.anchor,a=e.href,i=e.title,s=e.target,c=e.children,o=e.disabled,l=e.onClick,u="k-button k-button--".concat(t);return!1!==n?r.a.createElement("a",{href:a,title:i,className:u,target:s},c):r.a.createElement("button",{type:"button",className:u,disabled:o,onClick:l},c)},f=n(3),p=n(4),h=function(e,t,n){var a=t.indexOf(e),r=Object(p.a)(t);a>-1?r.splice(a,1):r.push(e),n(r)},g=function(){for(var e=[],t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach((function(t){var n=typeof t;if("string"===n)e.push(t);else if(Array.isArray(t)&&t.length)e.push(t.join(" "));else if("object"===n)for(var a in t)hasOwnProperty.call(t,a)&&t[a]&&e.push(a)})),e.join(" ")},b=function(){return{width:window.innerWidth,height:window.innerHeight}},k=function(e){var t,n=e.src,i=e.onLoad,s=e.className,o=Object(a.useState)(!1),l=Object(c.a)(o,2),u=l[0],m=l[1];Object(a.useEffect)((function(){var e=new Image;e.onload=function(){i(),m(!0)},e.src=n}),[]);var d=g((t={},Object(f.a)(t,s,!0),Object(f.a)(t,"k-image-fill",!0),Object(f.a)(t,"k-image-loaded",u),t));return r.a.createElement("div",{style:{backgroundImage:"url(".concat(n,")")},className:d})};k.defaultProps={onLoad:function(){},className:""};var v=k;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var y={hide:{opacity:0,y:40},show:{opacity:1,y:0}},O={initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0}},j={delay:.3,opacity:{ease:"linear",duration:.5},y:{type:"spring",duration:.5}},N={initial:{opacity:0,y:50},animate:{opacity:1,y:0}},w={duration:.4,ease:"easeInOut"},x={initial:function(e){var t={transition:w};return"none"===e?(t.opacity=0,t.transition={ease:"linear",duration:1}):t.x="next"===e?window.innerWidth:-window.innerWidth,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{opacity:1})},animate:{x:0,zIndex:99,transition:w},exit:function(e){return{x:"next"===e?-window.innerWidth:window.innerWidth,zIndex:0,transition:w}}},S=function(e){var t=e.direction,n=e.screenSize,i=e.setMinHeight,s=e.panelType,c=e.PanelBg,u=e.children,m=Object(a.createRef)(),d=Object(a.useRef)(window.innerHeight);return Object(a.useEffect)((function(){var e=m.current.offsetHeight;d.current=function(e){return e>window.innerHeight?e:window.innerHeight}(e),i(e)}),[n]),r.a.createElement(o.b.div,{className:"k-fshero--panel k-fshero--".concat(s),style:{height:d.current},variants:x,custom:t,initial:"initial",animate:"animate",exit:"exit"},r.a.createElement("div",{className:"k-fshero--centered",ref:m},r.a.createElement(l,{size:"md"},r.a.createElement(o.b.div,{initial:"initial",animate:"animate",variants:N,transition:j},u))),c)};S.defaultProps={PanelBg:""};var C=S,I=["intro","reason","feature","result"],P={default:"Why Are You Looking for CBD?",pet:"Why Are You Looking for CBD for your pet?"},z={default:[{name:"Stress / Anxiety",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/stress-icon.png"},{name:"Sleep",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/sleep-icon.png"},{name:"Aches & Pains",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/aches-icon.png"},{name:"Skincare",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/skincare-icon.png"},{name:"Relaxation",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/relax-icon.png"},{name:"General Wellness",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/wellness-icon.png"}],pet:[{name:"Stress / Anxiety",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/stress-icon.png"},{name:"Aches & Pains",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/aches-icon.png"},{name:"General Wellness",icon:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/wellness-icon.png"}]},K={default:["Discreet","Ease of Use","Easy To Bring Along","Topical","Fast Acting","Flavor","Flavorless"],pet:["Convenience","Can be added to pet food or treats"]},H={default:{"Tincture - Flavored":{id:[205342,205366,205491],sku:"",reasons:[0,1,4,5],features:[1,2,5],url:"#tincture-flavored",description:"Lorem dolor set amet.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/results-fpo.jpg",weights:{}},"Tincture - Unflavored":{id:[205502],sku:"",reasons:[0,1,4,5],features:[1,2,6],url:"#tincture-unflavored",description:"Lorem dolor set amet.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/results-fpo.jpg",weights:{}},"Gummies - Regular or Sour":{id:[30240],sku:"",reasons:[0,1,4,5],features:[0,1,2,5],url:"#gummies",description:"Lorem dolor set amet.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/results-fpo.jpg",weights:{}},"Vape Juice - Flavored":{id:[30193,30198,30202,30211,30217],reasons:[0,4],features:[2,4,5],url:"#vape-flavored",description:"Lorem dolor set amet.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/results-fpo.jpg",weights:{}},"Vape Juice - Unflavored":{id:[30207],sku:"",reasons:[0,4],features:[2,4,6],url:"#vape-flavored",description:"Lorem dolor set amet.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/results-fpo.jpg",weights:{}},"Healing Balm":{id:[424649,503515],reasons:[2],features:[3],url:"#healing-balm",description:"Lorem dolor set amet.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/results-fpo.jpg",weights:{}},"Lavender Lotion":{id:[559149],reasons:[3],features:[3],url:"#lavendar-lotion",description:"Lorem dolor set amet.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/results-fpo.jpg",weights:{}}},pet:{"Pet Spray":{id:[168056],sku:"PETSPRY",reasons:[],features:[1],url:"#pet-spray",description:"Lorem dolor set amet.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/results-fpo.jpg",weights:{}},"Soft Pet Chews":{id:[116376],sku:"KPTSCHEWS",reasons:[],features:[0],url:"#pet-chews",description:"Lorem dolor set amet.",image:"https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/results-fpo.jpg",weights:{}}}},L=r.a.createElement(v,{className:"k-fshero--intro-bg",src:"https://cdn2.hubspot.net/hubfs/5273025/mag/product-finder-hero.jpg"}),M=function(e){var t=e.direction,n=e.setMinHeight,a=e.screenSize,i=e.onPrimaryClick,s=e.onSecondaryClick;return r.a.createElement(C,{direction:t,screenSize:a,setMinHeight:n,panelType:"intro",PanelBg:L},r.a.createElement(u,{size:"lg"},"Welcome To The Koi CBD Product Finder"),r.a.createElement(m,null,"I'm interested in CBD products for..."),r.a.createElement("div",{className:"k-hero--action"},r.a.createElement(d,{anchor:!1,variant:"primary",onClick:i},"Myself or a Loved One \u2192"),r.a.createElement(d,{anchor:!1,variant:"secondary",onClick:s},"My Pet \u2192")))};M.defaultProps={onPrimaryClick:function(){},onSecondaryClick:function(){}};var B=M,R=function(e){var t=e.disabled,n=e.onNextClick,a=e.children;return r.a.createElement("div",{className:"k-fshero--btn"},r.a.createElement(o.b.div,{variants:y,initial:!1,animate:t?"hide":"show"},r.a.createElement(d,{anchor:!1,variant:"primary",disabled:t,onClick:n},a)))},T=function(e){var t=e.direction,n=e.mode,i=e.screenSize,s=e.reasons,c=e.setReasons,o=e.setMinHeight,l=e.onNextClick,m=Object(a.useRef)(null);return r.a.createElement(C,{direction:t,screenSize:i,setMinHeight:o,panelType:"reason"},r.a.createElement(u,{size:"md"},P[n]),r.a.createElement("ul",{className:"k-reasons--list"},z[n].map((function(e,t){return r.a.createElement("li",{key:t,className:g({"k-active":s.indexOf(e.name)>-1})},r.a.createElement("label",{htmlFor:"reason-".concat(t)},r.a.createElement("input",{id:"reason-".concat(t),type:"checkbox",checked:s.indexOf(e.name)>-1,onFocus:function(e){return n=t,m.current=n;var n},onChange:function(t){return h(e.name,s,(function(e){return c(e)}))}}),r.a.createElement("div",{className:"k-reason--icon"},r.a.createElement("figure",null,r.a.createElement("span",{className:"k-reason--icon-bg"}),r.a.createElement("span",{className:"k-reason--icon-img",style:{backgroundImage:"url(".concat(e.icon,")")}}))),r.a.createElement("div",{className:"k-reason--title"},r.a.createElement("h5",null,e.name))))}))),r.a.createElement(R,{disabled:0===s.length,onNextClick:l},"Next \u2192"))};T.defaultProps={setReasons:function(){},onNextClick:function(){}};var F=T,D=function(e){var t=e.direction,n=e.mode,a=e.screenSize,i=e.features,s=e.setFeatures,c=e.setMinHeight,o=e.onNextClick;return r.a.createElement(C,{direction:t,screenSize:a,setMinHeight:c,panelType:"feature"},r.a.createElement(u,{size:"md"},"Which Features of CBD are Most Important to You?"),r.a.createElement("ul",{className:"k-reasons--list"},K[n].map((function(e,t){return r.a.createElement("li",{key:t,className:g({"k-active":i.indexOf(e)>-1})},r.a.createElement("label",{htmlFor:"feature-".concat(t)},r.a.createElement("input",{id:"feature-".concat(t),type:"checkbox",checked:i.indexOf(e)>-1,onChange:function(t){return h(e,i,(function(e){return s(e)}))}}),r.a.createElement("div",{className:"k-feature--icon"},r.a.createElement("span",null,"0",t+1)),r.a.createElement("div",{className:"k-reason--title"},r.a.createElement("h5",null,e))))}))),r.a.createElement(R,{disabled:0===i.length,onNextClick:o},"Get Results \u2192"))};D.defaultProps={onNextClick:function(){}};var A=D,W=function(e,t,n){return t.map((function(t){var a=e.indexOf(t);return n.indexOf(a)})).filter((function(e){return e>-1}))},Y=function(e){var t=e.direction,n=e.mode,i=e.reasons,s=e.screenSize,m=e.features,f=e.setMinHeight,h=Object(a.useRef)(),g=Object(a.useRef)(function(){var e=document.getElementById("k-products-data");return JSON.parse(e.textContent)}());Object(a.useEffect)((function(){f(h.current.offsetHeight)}),[s]);var b=function(e,t,n,a){var r=H[a],i=z[a].map((function(e){return e.name})),s=K[a],o=Object.keys(r),l=o.reduce((function(e,a){var c=r[a].reasons,o=r[a].features,l=W(i,t,c),u=W(s,n,o);return e[a]=(l.length+u.length)/(c.length+o.length),e}),{});console.log("Match Relevance: ",l);var u=Object(p.a)(o);u.sort((function(e,t){return l[t]-l[e]})),console.log("Matching groups: ",u);var m=u.reduce((function(e,t,n){return 0===n?e:[].concat(Object(p.a)(e),Object(p.a)(r[t].id))}),[]),d=r[u[0]],f=d.description,h=d.url,g=d.image;return{hero:{heading:u[0],description:f,url:h,image:g},products:m.map((function(t){var n=e.filter((function(e){return t===e.ID}));return Object(c.a)(n,1)[0]}))}}(g.current,i,m,n),k=b.hero,E=b.products;return r.a.createElement(o.b.div,{className:"k-fshero--panel k-fshero--result",variants:x,custom:t,initial:"initial",animate:"animate",exit:"exit"},r.a.createElement("div",{className:"k-fshero--result-parent",ref:h},k&&r.a.createElement("div",{className:"k-fshero--results-hero"},r.a.createElement("div",{className:"k-resulthero--top-img"},r.a.createElement("figure",null,r.a.createElement(v,{className:"k-fshero--intro-bg",src:k.image}))),r.a.createElement("div",{className:"k-resulthero--top-info"},r.a.createElement("div",{className:"k-resulthero--top-liner"},r.a.createElement("small",null,"Your Results Are In:"),r.a.createElement(u,{tag:"h1",size:"md"},k.heading),r.a.createElement("p",null,k.description),r.a.createElement("div",{className:"k-resulthero--top-btn"},r.a.createElement(d,{variant:"primary",anchor:!0,href:k.url},"Shop Now \u2192"),r.a.createElement("span",null,"Scroll For More"))))),E&&r.a.createElement("div",{className:"k-fshero--results-body"},r.a.createElement(l,{size:"md"},r.a.createElement(u,{tag:"h1",size:"md"},"More Results For You")),r.a.createElement(l,{size:"md"},r.a.createElement("div",{className:"k-fsresults--related"},E.map((function(e,t){return r.a.createElement("div",{key:t,className:"k-productcard"},r.a.createElement("div",{className:"k-productcard--liner"},r.a.createElement("figure",{className:"k-figure"},r.a.createElement("img",{src:e.Images.split(",")[0],alt:e.Name})),r.a.createElement("div",{className:"k-productcard--title"},r.a.createElement("h3",{className:"k-headline k-headline--fake k-weight--lg"},e.Name),r.a.createElement("p",{className:"k-accent-text"},"Subtitle text can go here.")),r.a.createElement("div",{className:"k-productcard--action"},r.a.createElement("a",{href:"#buy-now",className:"k-button k-button--default"},"Buy Now"))))})))))))},J=function(e){var t=e.activeIndex,n=e.panelType,a=e.onBackClick,i=e.onStartOver;return r.a.createElement(o.b.div,{variants:O,transition:j,initial:"initial",animate:"animate",exit:"exit"},r.a.createElement("div",{className:"k-fshero--fixed"},r.a.createElement(l,{size:"lg"},r.a.createElement(o.a,null,"result"!==n&&r.a.createElement(o.b.div,{key:"btns-initial",className:"k-fshero--fixed-btns",initial:{opacity:0,y:-50},animate:{opacity:1,y:0,position:"relative"},exit:{opacity:0,y:-50,position:"absolute"},transition:j},r.a.createElement("button",{type:"button",className:"k-fshero--back",onClick:a},"\u2190 Back"),r.a.createElement("div",{className:"k-fshero--current"},r.a.createElement("span",null,"0",t)," / ",r.a.createElement("span",null,"02")))),r.a.createElement(o.a,null,"result"===n&&r.a.createElement(o.b.div,{key:"btns-result",className:"k-fshero--fixed-btns",initial:{opacity:0,y:50},animate:{opacity:1,y:0,position:"relative"},exit:{opacity:0,y:-50,position:"absolute"},transition:j},r.a.createElement("button",{type:"button",className:"k-fshero--back",onClick:i},"\u2190 Start Over"))))))},G=function(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)("intro"),l=Object(c.a)(s,2),u=l[0],m=l[1],d=Object(a.useState)("default"),f=Object(c.a)(d,2),p=f[0],h=f[1],g=Object(a.useState)([]),k=Object(c.a)(g,2),v=k[0],E=k[1],y=Object(a.useState)([]),O=Object(c.a)(y,2),j=O[0],N=O[1],w=Object(a.useState)("none"),x=Object(c.a)(w,2),S=x[0],C=x[1],P=Object(a.useState)("none"),z=Object(c.a)(P,2),K=z[0],H=z[1],L=Object(a.useState)(b()),M=Object(c.a)(L,2),R=M[0],T=M[1],D=Object(a.useMemo)((function(){return I.indexOf(u)}),[u]),W=Object(a.useMemo)((function(){return D>0&&D<=I.length}),[D]),G=Object(a.useRef)(null);Object(a.useEffect)((function(){n||(window.addEventListener("load",(function(){return i(!0)})),window.addEventListener("resize",(function(){G.current&&window.clearTimeout(G.current),G.current=window.setTimeout((function(){T(b())}),350)})))}),[]);var U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"next";e.preventDefault(),H(n),m(t)},V=function(e,t){h(t),U(e,"reason","next")},q={direction:K,mode:p,setMinHeight:C,screenSize:R};return r.a.createElement("section",{className:"k-fshero k-fshero-panel-".concat(u," k-fshero-mode-").concat(p),style:{minHeight:S,backgroundImage:"url(".concat("https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/koi-product-rec-bg.jpg",")")}},W&&r.a.createElement(J,{key:"controls",activeIndex:D,panelType:u,onStartOver:function(e){return function(e){e.preventDefault(),E([]),N([]),h("default"),U(e,"intro","prev")}(e)},onBackClick:function(e){return U(e,I[D-1],"prev")}}),n&&r.a.createElement(o.a,{custom:K},"intro"===u&&r.a.createElement(B,Object.assign({},q,{key:"intro",onPrimaryClick:function(e){return V(e,"default")},onSecondaryClick:function(e){return V(e,"pet")}}))||"reason"===u&&r.a.createElement(F,Object.assign({},q,{key:"reason",reasons:v,setReasons:E,onNextClick:function(e){return U(e,"feature")}}))||"feature"===u&&r.a.createElement(A,Object.assign({},q,{key:"feature",features:j,setFeatures:N,onNextClick:function(e){return U(e,"result")}}))||"result"===u&&r.a.createElement(Y,Object.assign({},q,{key:"result",reasons:v,features:j}))))},U=(n(12),document.getElementById("k-product-rec-root"));s.a.render(r.a.createElement(G,null),U)},7:function(e,t,n){e.exports=n(13)}},[[7,1,2]]]);
//# sourceMappingURL=main.5502688b.chunk.js.map