{"version":3,"sources":["components/Base.js","lib/utilities.js","components/LazyImage.js","lib/motion.js","components/PanelWrap.js","constants.js","components/IntroPanel.js","components/PanelButton.js","components/ReasonPanel.js","components/FeaturePanel.js","lib/recommendation.js","components/ResultsPanel.js","components/FixedControls.js","App.js","index.js"],"names":["Inner","size","children","className","Headline","tag","classname","BodyText","Button","variant","anchor","href","title","target","disabled","onClick","type","checklistChangeHandler","item","list","callback","existingIndex","indexOf","updated","splice","push","classnames","classes","args","forEach","arg","argType","Array","isArray","length","join","key","hasOwnProperty","call","getScreenSize","width","window","innerWidth","height","innerHeight","LazyImage","src","onLoad","useState","loaded","setLoaded","useEffect","image","Image","onload","imgClasses","style","backgroundImage","defaultProps","BUTTON_VARIANTS","hide","opacity","y","show","FIXED_CONTROLS_VARIANTS","initial","animate","exit","CONTENT_MOTION_TRANSITION","delay","ease","duration","CONTENT_MOTION_VARIANTS","transition","PANEL_MOTION_VARIANTS","direction","result","x","zIndex","PanelWrap","screenSize","setMinHeight","panelType","PanelBg","panelRef","createRef","panelHeight","useRef","refHeight","current","offsetHeight","getPanelHeight","div","variants","custom","ref","PANEL_TYPES","REASON_HEADLINE","default","pet","REASON_OPTIONS","name","icon","FEATURE_OPTIONS","PRODUCT_ASSOCIATIONS","id","sku","reasons","features","url","description","weights","1","category","3","IntroPanel","onPrimaryClick","onSecondaryClick","PanelButton","onNextClick","ReasonPanel","mode","setReasons","focusIndex","map","reason","i","htmlFor","checked","onFocus","_","index","onChange","FeaturePanel","setFeatures","feature","getGroupMatches","options","chosen","indexes","matchIndex","filter","getWeightedMatches","categoryName","associations","matches","resultWeight","weightsByType","weightsGroup","match","weightsIndex","toString","reduce","a","b","ResultsPanel","productCards","productData","script","document","getElementById","JSON","parse","textContent","parseProductData","reasonOptions","opt","featureOptions","assocKeys","Object","keys","matchRelevance","reasonIndexes","featureIndexes","reasonMatches","featureMatches","reasonWeight","featureWeight","reasonTotal","featureTotal","console","log","matchGroupsOrdered","sort","orderedProductIds","hero","heading","products","product","ID","getRecommendedProducts","isVapeRec","includes","nonVapeProducts","Name","maxSlideDistance","useMemo","cardWidth","accumulator","cardMultiplier","screenWidth","inner","mobile","cardMinWidth","sm","md","lg","warn","getCardMultiplier","el","offsetWidth","drag","dragConstraints","right","left","Images","split","alt","LinkToProduct","FixedControls","activeIndex","onBackClick","onStartOver","position","App","setPanelType","setMode","minHeight","setDirection","setScreenSize","showControls","timeout","addEventListener","clearTimeout","setTimeout","goToPanel","e","panel","preventDefault","switchMode","passThroughProps","resetAll","root","ReactDOM","render"],"mappings":"2MAEaA,EAAQ,SAAC,GAAD,IAAGC,EAAH,EAAGA,KAAMC,EAAT,EAASA,SAAT,OACnB,yBAAKC,UAAS,2BAAsBF,IACjCC,IAIQE,EAAW,SAAC,GAA6B,IAA3BH,EAA0B,EAA1BA,KAAMI,EAAoB,EAApBA,IAAKH,EAAe,EAAfA,SAC9BI,EAAS,iCAA6BL,GAC5C,MACU,OAARI,EACA,wBAAIF,UAAWG,GAAYJ,GAC3B,wBAAIC,UAAWG,GAAYJ,IAIlBK,EAAW,SAAC,GAAD,IAAGL,EAAH,EAAGA,SAAH,OACtB,yBAAKC,UAAU,mBACb,2BAAID,KAIKM,EAAS,SAAC,GAA2E,IAAzEC,EAAwE,EAAxEA,QAASC,EAA+D,EAA/DA,OAAQC,EAAuD,EAAvDA,KAAMC,EAAiD,EAAjDA,MAAOC,EAA0C,EAA1CA,OAAQX,EAAkC,EAAlCA,SAAUY,EAAwB,EAAxBA,SAAUC,EAAc,EAAdA,QAC3ET,EAAS,6BAAyBG,GACxC,OACa,IAAXC,EACA,uBAAGC,KAAMA,EAAMC,MAAOA,EAAOT,UAAWG,EAAWO,OAAQA,GAASX,GACpE,4BAAQc,KAAK,SAASb,UAAWG,EAAWQ,SAAUA,EAAUC,QAASA,GAAUb,I,cC1B1Ee,EAAyB,SAACC,EAAMC,EAAMC,GACjD,IAAMC,EAAgBF,EAAKG,QAAQJ,GAC7BK,EAAO,YAAOJ,GAChBE,GAAiB,EACnBE,EAAQC,OAAOH,EAAe,GAE9BE,EAAQE,KAAKP,GAEfE,EAASG,IAIEG,EAAa,WAAa,IACrC,IAAMC,EAAU,GADqB,mBAATC,EAAS,yBAATA,EAAS,gBAgBrC,OAdAA,EAAKC,SAAQ,SAAAC,GACX,IAAMC,SAAiBD,EACvB,GAAgB,WAAZC,EACFJ,EAAQF,KAAKK,QACR,GAAIE,MAAMC,QAAQH,IAAQA,EAAII,OACnCP,EAAQF,KAAKK,EAAIK,KAAK,WACjB,GAAgB,WAAZJ,EACT,IAAK,IAAIK,KAAON,EACVO,eAAeC,KAAKR,EAAKM,IAAQN,EAAIM,IACvCT,EAAQF,KAAKW,MAKdT,EAAQQ,KAAK,MAGTI,EAAgB,iBAAO,CAClCC,MAAOC,OAAOC,WACdC,OAAQF,OAAOG,cC9BXC,EAAY,SAAC,GAAgC,IAAD,EAA7BC,EAA6B,EAA7BA,IAAKC,EAAwB,EAAxBA,OAAQ5C,EAAgB,EAAhBA,UAAgB,EACpB6C,oBAAS,GADW,mBACzCC,EADyC,KACjCC,EADiC,KAGhDC,qBAAU,WACR,IAAMC,EAAQ,IAAIC,MAClBD,EAAME,OAAS,WACbP,IACAG,GAAU,IAEZE,EAAMN,IAAMA,IACX,IAEH,IAAMS,EAAa7B,GAAU,mBAC1BvB,GAAY,GADc,cAE3B,gBAAgB,GAFW,cAG3B,iBAAkB8C,GAHS,IAK7B,OACE,yBACCO,MAAO,CAAEC,gBAAgB,OAAD,OAASX,EAAT,MACxB3C,UAAWoD,KAIhBV,EAAUa,aAAe,CACvBX,OAAQ,aACR5C,UAAW,IASE0C,Q,8NCtCR,IAAMc,EAAkB,CAC7BC,KAAM,CACJC,QAAS,EACTC,EAAG,IAELC,KAAM,CACJF,QAAS,EACTC,EAAG,IAMME,EAA0B,CACrCC,QAAS,CACPH,EAAG,GACHD,QAAS,GAEXK,QAAS,CACPJ,EAAG,EACHD,QAAS,GAEXM,KAAM,CACJL,GAAI,GACJD,QAAS,IAMAO,EAA4B,CACvCC,MAAO,GACPR,QAAS,CACPS,KAAM,SACNC,SAAU,IAEZT,EAAG,CACD9C,KAAM,SACNuD,SAAU,KAGDC,EAA0B,CACrCP,QAAS,CACPJ,QAAS,EACTC,EAAG,IAELI,QAAS,CACPL,QAAS,EACTC,EAAG,IAODW,EAAa,CACjBF,SAAU,GACVD,KAAM,aAEKI,EAAwB,CACnCT,QAAS,SAAAU,GACP,IAAIC,EAAS,CAAEH,cAOf,MANkB,SAAdE,GACFC,EAAOf,QAAU,EACjBe,EAAOH,WAAa,CAAEH,KAAM,SAAUC,SAAU,IAEhDK,EAAOC,EAAkB,SAAdF,EAAuBlC,OAAOC,YAAcD,OAAOC,W,yVAEzD,CAAP,GAAYkC,EAAZ,CAAoBf,QAAS,KAE/BK,QAAS,CACPW,EAAG,EACHC,OAAQ,GACRL,cAEFN,KAAM,SAAAQ,GACJ,MAAO,CACLE,EAAiB,SAAdF,GAAwBlC,OAAOC,WAAaD,OAAOC,WACtDoC,OAAQ,EACRL,gBCnEAM,EAAY,SAAC,GAOZ,IANLJ,EAMI,EANJA,UACAK,EAKI,EALJA,WACAC,EAII,EAJJA,aACAC,EAGI,EAHJA,UACAC,EAEI,EAFJA,QACAjF,EACI,EADJA,SAEMkF,EAAWC,sBACXC,EAAcC,iBAAO9C,OAAOG,aAQlC,OANAO,qBAAU,WACR,IAAMqC,EAAYJ,EAASK,QAAQC,aACnCJ,EAAYG,QAlBO,SAAAD,GAErB,OADiBA,EAAY/C,OAAOG,YAClB4C,EAAY/C,OAAOG,YAgBb+C,CAAeH,GACrCP,EAAaO,KACZ,CAACR,IAGF,kBAAC,IAAOY,IAAR,CACEzF,UAAS,oCAA+B+E,GACxC1B,MAAO,CAAEb,OAAQ2C,EAAYG,SAC7BI,SAAUnB,EACVoB,OAAQnB,EACRV,QAAQ,UACRC,QAAQ,UACRC,KAAK,QACL,yBAAKhE,UAAU,qBAAqB4F,IAAKX,GACvC,kBAAC,EAAD,CAAOnF,KAAK,MACV,kBAAC,IAAO2F,IAAR,CACE3B,QAAQ,UACRC,QAAQ,UACR2B,SAAUrB,EACVC,WAAYL,GACVlE,KAIPiF,IAKPJ,EAAUrB,aAAe,CACvByB,QAAS,IAGIJ,QC3DFiB,EAAc,CACzB,QACA,SACA,UACA,UAMWC,EAAkB,CAC7BC,QAAS,+BACTC,IAAK,6CAGMC,EAAiB,CAC5BF,QAAS,CACP,CAAEG,KAAM,mBAAoBC,KAAM,kEAClC,CAAED,KAAM,QAASC,KAAM,iEACvB,CAAED,KAAM,SAAUC,KAAM,4DACxB,CAAED,KAAM,gBAAiBC,KAAM,iEAC/B,CAAED,KAAM,WAAYC,KAAM,oEAC1B,CAAED,KAAM,aAAcC,KAAM,iEAC5B,CAAED,KAAM,mBAAoBC,KAAM,qEAEpCH,IAAK,CACH,CAAEE,KAAM,mBAAoBC,KAAM,kEAClC,CAAED,KAAM,gBAAiBC,KAAM,iEAC/B,CAAED,KAAM,mBAAoBC,KAAM,sEAIzBC,EAAkB,CAC7BL,QAAS,CACP,gBACA,OACA,eAEFC,IAAK,CACH,cACA,uCAISK,EAAuB,CAClCN,QAAS,CACP,sBAAuB,CACrBO,GAAI,CAAC,OAAQ,OAAQ,QACrBC,IAAK,GACLC,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,GACtBC,SAAU,CAAC,GACXC,IAAK,+BACLC,YAAa,kIACb1D,MAAO,iEACP2D,QAAS,IAEX,wBAAyB,CACvBN,GAAI,CAAC,QACLC,IAAK,GACLC,QAAS,CAAC,EAAG,EAAG,EAAG,EAAG,GACtBC,SAAU,CAAC,GACXC,IAAK,iCACLC,YAAa,kIACb1D,MAAO,oEACP2D,QAAS,IAEX,4BAA6B,CAC3BN,GAAI,CAAC,OACLC,IAAK,GACLC,QAAS,CAAC,EAAG,EAAG,EAAG,GACnBC,SAAU,CAAC,GACXC,IAAK,wBACLC,YAAa,uGACb1D,MAAO,mEACP2D,QAAS,IAEX,iBAAkB,CAChBN,GAAI,CAAC,QACLE,QAAS,CAAC,EAAE,EAAE,EAAE,EAAE,GAClBC,SAAU,CAAC,GACXC,IAAK,0BACLC,YAAa,4hBACb1D,MAAO,mEACP2D,QAAS,IAEX,wBAAyB,CACvBN,GAAI,CAAC,MAAO,MAAO,MAAO,MAAO,OACjCE,QAAS,CAAC,EAAG,GACbC,SAAU,CAAC,GACXC,IAAK,0BACLC,YAAa,2IACb1D,MAAO,iEACP2D,QAAS,CACPH,SAAU,CACRI,EAAG,KAIT,0BAA2B,CACzBP,GAAI,CAAC,OACLC,IAAK,GACLC,QAAS,CAAC,EAAG,GACbC,SAAU,CAAC,GACXC,IAAK,0BACLC,YAAa,2GACb1D,MAAO,yEACP2D,QAAS,CACPH,SAAU,CACRI,EAAG,KAIT,eAAgB,CACdP,GAAI,CAAC,OAAQ,QACbE,QAAS,CAAC,GACVC,SAAU,CAAC,GACXC,IAAK,+BACLC,YAAa,+GACb1D,MAAO,iEACP2D,QAAS,CACPE,SAAU,EACVN,QAAS,CACPO,EAAG,OAIT,aAAe,CACbT,GAAI,CAAC,QACLE,QAAS,CAAC,GACVC,SAAU,CAAC,GACXC,IAAK,yBACLC,YAAa,+GACb1D,MAAO,mEACP2D,QAAS,KAGbZ,IAAK,CACH,YAAc,CACZM,GAAI,CAAC,QACLC,IAAK,UACLC,QAAS,GACTC,SAAU,CAAC,GACXC,IAAK,6BACLC,YAAa,wGACb1D,MAAO,kEACP2D,QAAS,IAEX,iBAAmB,CACjBN,GAAI,CAAC,QACLC,IAAK,YACLC,QAAS,GACTC,SAAU,CAAC,GACXC,IAAK,+BACLC,YAAa,wGACb1D,MAAO,kEACP2D,QAAS,MCrJT5B,EAAU,kBAAC,EAAD,CAAWhF,UAAU,qBAAqB2C,IDClC,uECClBqE,EAAa,SAAC,GAAD,IACjBxC,EADiB,EACjBA,UACAM,EAFiB,EAEjBA,aACAD,EAHiB,EAGjBA,WACAoC,EAJiB,EAIjBA,eACAC,EALiB,EAKjBA,iBALiB,OAMjB,kBAAC,EAAD,CACE1C,UAAWA,EACXK,WAAYA,EACZC,aAAcA,EACdC,UAAU,QACVC,QAASA,GACT,kBAAC,EAAD,CAAUlF,KAAK,MAAf,yCACA,kBAAC,EAAD,8CACA,yBAAKE,UAAU,kBACb,kBAAC,EAAD,CACEO,QAAQ,EACRD,QAAQ,UACRM,QAASqG,GAHX,gCAIA,kBAAC,EAAD,CACE1G,QAAQ,EACRD,QAAQ,YACRM,QAASsG,GAHX,oBAQNF,EAAWzD,aAAe,CACxB0D,eAAgB,aAChBC,iBAAkB,cAQLF,QC1BAG,EAfK,SAAC,GAAD,IAAGxG,EAAH,EAAGA,SAAUyG,EAAb,EAAaA,YAAarH,EAA1B,EAA0BA,SAA1B,OAClB,yBAAKC,UAAU,iBACb,kBAAC,IAAOyF,IAAR,CACEC,SAAUlC,EACVM,SAAS,EACTC,QAASpD,EAAW,OAAS,QAC7B,kBAAC,EAAD,CACEJ,QAAQ,EACRD,QAAQ,UACRK,SAAUA,EACVC,QAASwG,GAAerH,MCN1BsH,EAAc,SAAC,GAQd,IAPL7C,EAOI,EAPJA,UACA8C,EAMI,EANJA,KACAzC,EAKI,EALJA,WACA2B,EAII,EAJJA,QACAe,EAGI,EAHJA,WACAzC,EAEI,EAFJA,aACAsC,EACI,EADJA,YAEMI,EAAapC,iBAAO,MAG1B,OACE,kBAAC,EAAD,CACEZ,UAAWA,EACXK,WAAYA,EACZC,aAAcA,EACdC,UAAU,UACV,kBAAC,EAAD,CAAUjF,KAAK,MAAOgG,EAAgBwB,IACtC,wBAAItH,UAAU,mBACXiG,EAAeqB,GAAMG,KAAI,SAACC,EAAQC,GAAT,OAC1B,wBAAI1F,IAAK0F,EAAG3H,UAAWuB,EAAW,CAAC,WAAYiF,EAAQrF,QAAQuG,EAAOxB,OAAS,KAC7E,2BAAO0B,QAAO,iBAAYD,IACxB,2BACErB,GAAE,iBAAYqB,GACd9G,KAAK,WACLgH,QAASrB,EAAQrF,QAAQuG,EAAOxB,OAAS,EACzC4B,QAAS,SAAAC,GAAC,OAjBDC,EAiBkBL,EAjBTH,EAAWlC,QAAU0C,EAA9B,IAAAA,GAkBTC,SAAU,SAAAF,GAAC,OAAIjH,EAAuB4G,EAAOxB,KAAMM,GAAS,SAAApF,GAAO,OAAImG,EAAWnG,SACpF,yBAAKpB,UAAU,kBACb,gCACE,0BAAMA,UAAU,sBAChB,0BAAMA,UAAU,qBAAqBqD,MAAO,CAAEC,gBAAgB,OAAD,OAASoE,EAAOvB,KAAhB,UAGjE,yBAAKnG,UAAU,mBACb,4BAAK0H,EAAOxB,aAKpB,kBAAC,EAAD,CACEvF,SAA6B,IAAnB6F,EAAQzE,OAClBqF,YAAaA,GAFf,iBAUNC,EAAY9D,aAAe,CACzBgE,WAAY,aACZH,YAAa,cASAC,QC/DTa,EAAe,SAAC,GAAD,IACnB1D,EADmB,EACnBA,UACA8C,EAFmB,EAEnBA,KACAzC,EAHmB,EAGnBA,WACA4B,EAJmB,EAInBA,SACA0B,EALmB,EAKnBA,YACArD,EANmB,EAMnBA,aACAsC,EAPmB,EAOnBA,YAPmB,OAQnB,kBAAC,EAAD,CACE5C,UAAWA,EACXK,WAAYA,EACZC,aAAcA,EACdC,UAAU,WACV,kBAAC,EAAD,CAAUjF,KAAK,MAAf,+BACA,wBAAIE,UAAU,mBACXoG,EAAgBkB,GAAMG,KAAI,SAACW,EAAST,GAAV,OAC3B,wBAAI1F,IAAK0F,EAAG3H,UAAWuB,EAAW,CAAC,WAAYkF,EAAStF,QAAQiH,IAAY,KAC1E,2BAAOR,QAAO,kBAAaD,IACzB,2BACErB,GAAE,kBAAaqB,GACf9G,KAAK,WACLgH,QAASpB,EAAStF,QAAQiH,IAAY,EACtCH,SAAU,SAAAF,GAAC,OAAIjH,EAAuBsH,EAAS3B,GAAU,SAAArF,GAAO,OAAI+G,EAAY/G,SAClF,yBAAKpB,UAAU,mBACb,kCAAQ2H,EAAI,IAEd,yBAAK3H,UAAU,mBACb,4BAAKoI,UAKb,kBAAC,EAAD,CACEzH,SAA8B,IAApB8F,EAAS1E,OACnBqF,YAAaA,GAFf,wBAQJc,EAAa3E,aAAe,CAC1B6D,YAAa,cASAc,QClDTG,EAAkB,SAACC,EAASC,EAAQC,GAMxC,OALqBD,EAAOd,KAAI,SAAA1G,GAC9B,IAAMiH,EAAQM,EAAQnH,QAAQJ,GACxB0H,EAAaD,EAAQrH,QAAQ6G,GACnC,OAAOS,GAAc,EAAIT,EAAQS,KAEfC,QAAO,SAAAf,GAAC,OAAIA,GAAK,MAGjCgB,EAAqB,SAACC,EAAcC,EAAcC,EAASjI,GAC/D,IAAIkI,EAAe,EACbC,EAAgBH,EAAaD,GAAchC,QAAQ/F,GACzD,GAAImI,EAAe,CAGjB,IAAMC,EAAeH,EAAQrB,KAAI,SAAAyB,GAC/B,IAAMC,EAAeD,EAAME,WAC3B,OAAOJ,EAAcG,MAGvBJ,EAAeE,EAAaI,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,IAAG,GAAKN,EAAalH,OASxE,OAAOgH,GC4HMS,EApHM,SAAC,GAAsE,IAApEhF,EAAmE,EAAnEA,UAAW8C,EAAwD,EAAxDA,KAAMd,EAAkD,EAAlDA,QAAS3B,EAAyC,EAAzCA,WAAY4B,EAA6B,EAA7BA,SAAU3B,EAAmB,EAAnBA,aAChEG,EAAWG,mBACXqE,EAAerE,iBAAO,IACtBsE,EAActE,iBAvCG,WACvB,IAAMuE,EAASC,SAASC,eAAe,mBACvC,OAAOC,KAAKC,MAAMJ,EAAOK,aAqCEC,IAE3BjH,qBAAU,WACR8B,EAAaG,EAASK,QAAQC,gBAC7B,CAACV,IAPqF,MDHrD,SAAC6E,EAAalD,EAASC,EAAUa,GAErE,IAAMuB,EAAexC,EAAqBiB,GACpC4C,EAAgBjE,EAAeqB,GAAMG,KAAI,SAAA0C,GAAG,OAAIA,EAAIjE,QACpDkE,EAAiBhE,EAAgBkB,GAGjC+C,EAAYC,OAAOC,KAAK1B,GAGxB2B,EAAiBH,EAAUhB,QAAO,SAAC5E,EAAQxC,GAC/C,IAAMwI,EAAgB5B,EAAa5G,GAAKuE,QAClCkE,EAAiB7B,EAAa5G,GAAKwE,SAEnCkE,EAAgBtC,EAAgB6B,EAAe1D,EAASiE,GACxDG,EAAiBvC,EAAgB+B,EAAgB3D,EAAUiE,GAE3DG,EAAelC,EAAmB1G,EAAK4G,EAAc8B,EAAe,WACpEG,EAAgBnC,EAAmB1G,EAAK4G,EAAc+B,EAAgB,YAEtEG,EAAcJ,EAAc5I,OAAS8I,EACrCG,EAAeJ,EAAe7I,OAAS+I,EAG7C,OADArG,EAAOxC,IAAQ8I,EAAcC,IAAiBP,EAAc1I,OAAS2I,EAAe3I,QAC7E0C,IACN,IAEHwG,QAAQC,IAAI,oBAAqBV,GAGjC,IAAMW,EAAkB,YAAQd,GAChCc,EAAmBC,MAAK,SAAC9B,EAAGC,GAAJ,OAAUiB,EAAejB,GAAKiB,EAAelB,MAErE2B,QAAQC,IAAI,oBAAqBC,GAGjC,IAAME,EAAoBF,EAAmB9B,QAAO,SAAC5E,EAAQxC,EAAK0F,GAChE,OAAU,IAANA,EAAgBlD,EACd,GAAN,mBAAYA,GAAZ,YAAuBoE,EAAa5G,GAAKqE,OACxC,IAvC2E,EA0C1CuC,EAAasC,EAAmB,IAA5DxE,EA1CsE,EA0CtEA,YAAaD,EA1CyD,EA0CzDA,IAAKzD,EA1CoD,EA0CpDA,MAG1B,MAAO,CACLqI,KAAM,CAAEC,QAASJ,EAAmB,GAAIxE,cAAaD,MAAKzD,SAC1DuI,SAAUH,EAAkB5D,KAAI,SAAAnB,GAAO,IAAD,EAClBoD,EAAYhB,QAAO,SAAA+C,GAAO,OAAInF,IAAOmF,EAAQC,MAC/D,OAFoC,wBCnCbC,CAAuBjC,EAAYpE,QAASkB,EAASC,EAAUa,GAAlFgE,EATiF,EASjFA,KAAME,EAT2E,EAS3EA,SAGRI,EAAYN,EAAKC,QAAQM,SAAS,QAClCC,EAAkBN,EAAS9C,QAAO,SAAA+C,GAAO,OAAKA,EAAQM,KAAKF,SAAS,WAEpEG,EAAmBC,mBAAQ,WAAO,IAC9B3G,EAAYmE,EAAZnE,QACJ4G,EAAY,EACZC,EAAc,EACZC,EAlDgB,WACxB,IAAMC,EAAcjK,IAAgBC,MAS5BiK,EAPC,CAACjK,MAAO,GAOFkK,EANL,CAAClK,MAAO,EAAGmK,aAAc,MAMZC,EALjB,CAACpK,MAAO,IAAKmK,aAAc,MAKNE,EAJrB,CAACrK,MAAO,IAAKmK,aAAc,MAIFG,EAHzB,CAACtK,MAAO,IAAKmK,aAAc,MAIjC,QAAQ,GACN,KAAMH,EAAcI,EAAGpK,MACrB,OAAOiK,EAAMjK,MAAQkK,EAAOC,aAE9B,KAAMH,EAAcI,EAAGpK,OAASgK,EAAcK,EAAGrK,MAC/C,OAAOiK,EAAMjK,MAAQoK,EAAGD,aAE1B,KAAMH,EAAcK,EAAGrK,OAASgK,EAAcM,EAAGtK,MAC/C,OAAOiK,EAAMjK,MAAQqK,EAAGF,aAE1B,KAAMH,EAAcM,EAAGtK,MACrB,OAAOiK,EAAMjK,MAAQsK,EAAGH,aAE1B,QAEE,OADAvB,QAAQ2B,KAAK,gBACN,GAwBcC,GAMvB,OALAvH,EAAQ5D,SAAQ,SAAAoL,GACdZ,EAAYY,EAAGC,YACfZ,GAAeW,EAAGC,iBAEpBZ,GAAgBD,EAAYE,KAE3B,CAAC3C,EAAanE,UAEjB,OACE,kBAAC,IAAOG,IAAR,CACEzF,UAAU,mCACV0F,SAAUnB,EACVoB,OAAQnB,EACRV,QAAQ,UACRC,QAAQ,UACRC,KAAK,QACL,yBAAKhE,UAAU,0BAA0B4F,IAAKX,GAE3CqG,GACD,yBAAKtL,UAAU,0BACb,yBAAKA,UAAU,yBACb,gCACE,kBAAC,EAAD,CAAWA,UAAU,qBAAqB2C,IAAK2I,EAAKrI,UAGxD,yBAAKjD,UAAU,0BACb,yBAAKA,UAAU,2BACb,uDACA,kBAAC,EAAD,CAAUE,IAAI,KAAKJ,KAAK,MAAMwL,EAAKC,SACnC,2BAAID,EAAK3E,aACT,yBAAK3G,UAAU,yBACb,kBAAC,EAAD,CAAQM,QAAQ,UAAUC,QAAM,EAACC,KAAM8K,EAAK5E,KAA5C,mBACA,kDAEF,2BAAO1G,UAAU,4BAAjB,oGAOLwL,GACD,yBAAKxL,UAAU,0BACb,kBAAC,EAAD,CAAOF,KAAK,MACV,kBAAC,EAAD,CAAUI,IAAI,KAAKJ,KAAK,MAAxB,0CAEF,kBAAC,EAAD,CAAOA,KAAK,MACV,yBAAKE,UAAU,wBACb,kBAAC,IAAOyF,IAAR,CACEzF,UAAU,sBACVgN,KAAK,IACLC,gBAAiB,CAAEC,MAAO,EAAGC,KAAMnB,IAElCJ,GAAaJ,EAAS/D,KAAI,SAACgE,EAAS9D,GAAV,OACzB,yBAAK1F,IAAK0F,EAAG3H,UAAU,gBAAgB4F,IAAK,SAAAA,GAAQ6D,EAAanE,QAAQqC,GAAK/B,IAC5E,yBAAK5F,UAAU,wBACb,4BAAQA,UAAU,YAChB,yBAAK2C,IAAK8I,EAAQ2B,OAAOC,MAAM,KAAK,GAAIC,IAAK7B,EAAQM,QAEvD,yBAAK/L,UAAU,wBACb,wBAAIA,UAAU,4CAA4CyL,EAAQM,OAEpE,yBAAK/L,UAAU,yBACb,uBAAGQ,KAAMiL,EAAQ8B,cAAevN,UAAU,8BAA1C,kBAMN4L,GAAaE,EAAgBrE,KAAI,SAACgE,EAAS9D,GAAV,OACnC,yBAAK1F,IAAK0F,EAAG3H,UAAU,gBAAgB4F,IAAK,SAAAA,GAAQ6D,EAAanE,QAAQqC,GAAK/B,IAC5E,yBAAK5F,UAAU,wBACb,4BAAQA,UAAU,YAChB,yBAAK2C,IAAK8I,EAAQ2B,OAAOC,MAAM,KAAK,GAAIC,IAAK7B,EAAQM,QAEvD,yBAAK/L,UAAU,wBACb,wBAAIA,UAAU,4CAA4CyL,EAAQM,OAEpE,yBAAK/L,UAAU,8BACb,2BAAIyL,EAAQ9E,cAEd,yBAAK3G,UAAU,yBACb,uBAAGQ,KAAMiL,EAAQ8B,cAAevN,UAAU,8BAA1C,wBCzFPwN,EArDO,SAAC,GAA0D,IAAxDC,EAAuD,EAAvDA,YAAa1I,EAA0C,EAA1CA,UAAW2I,EAA+B,EAA/BA,YAAaC,EAAkB,EAAlBA,YAE5D,OACE,kBAAC,IAAOlI,IAAR,CACEC,SAAU7B,EACVS,WAAYL,EACZH,QAAQ,UACRC,QAAQ,UACRC,KAAK,QACL,yBAAKhE,UAAU,mBACb,kBAAC,EAAD,CAAOF,KAAK,MAEZ,kBAAC,IAAD,KACiB,WAAdiF,GACD,kBAAC,IAAOU,IAAR,CACExD,IAAI,eACJjC,UAAU,uBACV8D,QAAS,CAAEJ,QAAS,EAAGC,GAAI,IAC3BI,QAAS,CAAEL,QAAS,EAAGC,EAAG,EAAGiK,SAAU,YACvC5J,KAAM,CAAEN,QAAS,EAAGC,GAAI,GAAIiK,SAAU,YACtCtJ,WAAYL,GACZ,4BACEpD,KAAK,SACLb,UAAU,iBACVY,QAAS8M,GAHX,eAIA,yBAAK1N,UAAU,qBACb,kCAAQyN,GADV,MACgC,uCAKpC,kBAAC,IAAD,KACiB,WAAd1I,GACD,kBAAC,IAAOU,IAAR,CACExD,IAAI,cACJjC,UAAU,uBACV8D,QAAS,CAAEJ,QAAS,EAAGC,EAAG,IAC1BI,QAAS,CAAEL,QAAS,EAAGC,EAAG,EAAGiK,SAAU,YACvC5J,KAAM,CAAEN,QAAS,EAAGC,GAAI,GAAIiK,SAAU,YACtCtJ,WAAYL,GACZ,4BACEpD,KAAK,SACLb,UAAU,iBACVY,QAAS+M,GAHX,2BCwDGE,EAzFH,WAAO,IAAD,EACYhL,oBAAS,GADrB,mBACTC,EADS,KACDC,EADC,OAEkBF,mBAAS,SAF3B,mBAETkC,EAFS,KAEE+I,EAFF,OAGQjL,mBAAS,WAHjB,mBAGTyE,EAHS,KAGHyG,EAHG,OAIclL,mBAAS,IAJvB,mBAIT2D,EAJS,KAIAe,EAJA,OAKgB1E,mBAAS,IALzB,mBAKT4D,EALS,KAKC0B,EALD,OAMkBtF,mBAAS,QAN3B,mBAMTmL,EANS,KAMElJ,EANF,OAOkBjC,mBAAS,QAP3B,mBAOT2B,EAPS,KAOEyJ,EAPF,OAQoBpL,mBAAST,KAR7B,mBAQTyC,EARS,KAQGqJ,EARH,KAUVT,EAAcxB,mBAAQ,kBAAMpG,EAAY1E,QAAQ4D,KAAY,CAACA,IAC7DoJ,EAAelC,mBAAQ,kBAAMwB,EAAc,GAAKA,GAAe5H,EAAY9D,SAAQ,CAAC0L,IAEpFW,EAAUhJ,iBAAO,MACvBpC,qBAAU,WACHF,IACHR,OAAO+L,iBAAiB,QAAQ,kBAAMtL,GAAU,MAChDT,OAAO+L,iBAAiB,UAAU,WAC5BD,EAAQ9I,SAAShD,OAAOgM,aAAaF,EAAQ9I,SACjD8I,EAAQ9I,QAAUhD,OAAOiM,YAAW,WAClCL,EAAc9L,OACb,WAGN,IAEH,IAAMoM,EAAY,SAACC,EAAGC,GAA+B,IAAxBlK,EAAuB,uDAAX,OACvCiK,EAAEE,iBACFV,EAAazJ,GACbsJ,EAAaY,IAETE,EAAa,SAACH,EAAGnH,GACrByG,EAAQzG,GACRkH,EAAUC,EAAG,SAAU,SAUnBI,EAAmB,CAAErK,YAAW8C,OAAMxC,eAAcD,cAE1D,OACE,6BACE7E,UAAS,kCAA6B+E,EAA7B,0BAAwDuC,GACjEjE,MAAO,CAAE2K,YAAW1K,gBAAgB,OAAD,ORnDjB,wEQmDiB,OAClC6K,GACD,kBAAC,EAAD,CACElM,IAAI,WACJwL,YAAaA,EACb1I,UAAWA,EACX4I,YAAa,SAAAc,GAAC,OAnBH,SAAAA,GACfA,EAAEE,iBACFpH,EAAW,IACXY,EAAY,IACZ4F,EAAQ,WACRS,EAAUC,EAAG,QAAS,QAcAK,CAASL,IAC3Bf,YAAa,SAAAe,GAAC,OAAID,EAAUC,EAAG5I,EAAY4H,EAAc,GAAI,WAC9D3K,GACD,kBAAC,IAAD,CAAiB6C,OAAQnB,GACP,UAAdO,GACA,kBAAC,EAAD,iBACM8J,EADN,CAEE5M,IAAI,QACJgF,eAAgB,SAAAwH,GAAC,OAAIG,EAAWH,EAAG,YACnCvH,iBAAkB,SAAAuH,GAAC,OAAIG,EAAWH,EAAG,YAC1B,WAAd1J,GACC,kBAAC,EAAD,iBACM8J,EADN,CAEE5M,IAAI,SACJuE,QAASA,EACTe,WAAYA,EACZH,YAAa,SAAAqH,GAAC,OAAID,EAAUC,EAAG,gBACpB,YAAd1J,GACC,kBAAC,EAAD,iBACM8J,EADN,CAEE5M,IAAI,UACJwE,SAAUA,EACV0B,YAAaA,EACbf,YAAa,SAAAqH,GAAC,OAAID,EAAUC,EAAG,eACpB,WAAd1J,GACC,kBAAC,EAAD,iBACM8J,EADN,CAEE5M,IAAI,SACJuE,QAASA,EACTC,SAAUA,QC1FhBsI,G,MAAOnF,SAASC,eAAe,uBACrCmF,IAASC,OAAO,kBAAC,EAAD,MAASF,I","file":"static/js/main.7bc2e2a7.chunk.js","sourcesContent":["import React from 'react';\n\nexport const Inner = ({ size, children }) => (\n  <div className={`k-inner k-inner--${size}`}>\n    {children}\n  </div>\n);\n\nexport const Headline = ({ size, tag, children }) => {\n  const classname = `k-headline k-headline--${size}`;\n  return (\n    tag === 'h1' ?\n    <h1 className={classname}>{children}</h1> :\n    <h3 className={classname}>{children}</h3>\n  );\n};\n\nexport const BodyText = ({ children }) => (\n  <div className=\"k-hero--bigtext\">\n    <p>{children}</p>\n  </div>\n);\n\nexport const Button = ({ variant, anchor, href, title, target, children, disabled, onClick }) => {\n  const classname = `k-button k-button--${variant}`;\n  return (\n    anchor !== false ?\n    <a href={href} title={title} className={classname} target={target}>{children}</a> :\n    <button type=\"button\" className={classname} disabled={disabled} onClick={onClick}>{children}</button>\n  );\n};","\n\nexport const checklistChangeHandler = (item, list, callback) => {\n  const existingIndex = list.indexOf(item);\n  const updated = [...list];\n  if (existingIndex > -1) {\n    updated.splice(existingIndex, 1);\n  } else {\n    updated.push(item); \n  }\n  callback(updated);\n};\n\n// classname generation\nexport const classnames = (...args) => {\n  const classes = [];\n  args.forEach(arg => {\n    const argType = typeof arg;\n    if (argType === 'string') {\n      classes.push(arg);\n    } else if (Array.isArray(arg) && arg.length) {\n      classes.push(arg.join(' '));\n    } else if (argType === 'object') {\n      for (let key in arg) {\n        if (hasOwnProperty.call(arg, key) && arg[key]) {\n          classes.push(key);\n        }\n      }\n    }\n  });\n  return classes.join(' ');\n};\n\nexport const getScreenSize = () => ({\n  width: window.innerWidth,\n  height: window.innerHeight,\n});","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { classnames } from '../lib/utilities';\n\nconst LazyImage = ({ src, onLoad, className }) => {\n  const [loaded, setLoaded] = useState(false);\n  \n  useEffect(() => {\n    const image = new Image();\n    image.onload = () => {\n      onLoad();\n      setLoaded(true);\n    };\n    image.src = src;\n  }, []);\n\n  const imgClasses = classnames({\n    [className]: true,\n    'k-image-fill': true,\n    'k-image-loaded': loaded, \n  });\n  return (\n    <div \n     style={{ backgroundImage: `url(${src})` }}\n     className={imgClasses}></div>\n  );\n};\n\nLazyImage.defaultProps = {\n  onLoad: () => {},\n  className: '',\n};\n\nLazyImage.propTypes = {\n  src: PropTypes.string.isRequired,\n  onLoad: PropTypes.func,\n  className: PropTypes.string,\n}\n\nexport default LazyImage;\n","\n// Button show/hide\nexport const BUTTON_VARIANTS = {\n  hide: {\n    opacity: 0,\n    y: 40,\n  },\n  show: {\n    opacity: 1,\n    y: 0,\n  },\n};\n\n\n// Fixed top bar variants\nexport const FIXED_CONTROLS_VARIANTS = {\n  initial: {\n    y: 50,\n    opacity: 0,\n  },\n  animate: {\n    y: 0,\n    opacity: 1,\n  },\n  exit: {\n    y: -50,\n    opacity: 0,\n  },\n};\n\n\n// Panel Content motion\nexport const CONTENT_MOTION_TRANSITION = {\n  delay: 0.3,\n  opacity: {\n    ease: 'linear',\n    duration: 0.5,\n  },\n  y: {\n    type: 'spring',\n    duration: 0.5,\n  },\n};\nexport const CONTENT_MOTION_VARIANTS = {\n  initial: {\n    opacity: 0,\n    y: 50,\n  },\n  animate: {\n    opacity: 1,\n    y: 0,\n  },\n};\n\n\n\n// Panel-to-Panel transition\nconst transition = {\n  duration: 0.4,\n  ease: 'easeInOut',\n};\nexport const PANEL_MOTION_VARIANTS = {\n  initial: direction => {\n    let result = { transition };\n    if (direction === 'none') {\n      result.opacity = 0;\n      result.transition = { ease: 'linear', duration: 1 };\n    } else {\n      result.x = direction === 'next' ? window.innerWidth : -window.innerWidth;\n    }\n    return { ...result, opacity: 1 };\n  },\n  animate: {\n    x: 0,\n    zIndex: 99,\n    transition,\n  },\n  exit: direction => {\n    return {\n      x: direction === 'next' ? -window.innerWidth : window.innerWidth,\n      zIndex: 0,\n      transition,\n    };\n  },\n};\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useRef, createRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Inner } from './Base';\nimport {\n  PANEL_MOTION_VARIANTS,\n  CONTENT_MOTION_VARIANTS,\n  CONTENT_MOTION_TRANSITION } from '../lib/motion';\n\nconst getPanelHeight = refHeight => {\n  const oversize = refHeight > window.innerHeight;\n  return oversize ? refHeight : window.innerHeight;\n};\n\nconst PanelWrap = ({\n  direction,\n  screenSize,\n  setMinHeight,\n  panelType,\n  PanelBg,\n  children\n}) => {\n  const panelRef = createRef();\n  const panelHeight = useRef(window.innerHeight);\n\n  useEffect(() => {\n    const refHeight = panelRef.current.offsetHeight;\n    panelHeight.current = getPanelHeight(refHeight);\n    setMinHeight(refHeight);\n  }, [screenSize]);\n\n  return (\n    <motion.div\n      className={`k-fshero--panel k-fshero--${panelType}`}\n      style={{ height: panelHeight.current }}\n      variants={PANEL_MOTION_VARIANTS}\n      custom={direction}\n      initial=\"initial\"\n      animate=\"animate\"\n      exit=\"exit\">\n      <div className=\"k-fshero--centered\" ref={panelRef}>\n        <Inner size=\"md\">\n          <motion.div\n            initial='initial'\n            animate='animate'\n            variants={CONTENT_MOTION_VARIANTS}\n            transition={CONTENT_MOTION_TRANSITION}>\n            { children }\n          </motion.div>\n        </Inner>\n      </div>\n      {PanelBg}\n    </motion.div>\n  );\n};\n\nPanelWrap.defaultProps = {\n  PanelBg: '',\n};\n\nexport default PanelWrap;\n","\nexport const PANEL_TYPES = [\n  'intro', \n  'reason', \n  'feature', \n  'result'\n];\n\nexport const INTRO_BG = 'https://cdn2.hubspot.net/hubfs/5273025/mag/product-finder-hero.jpg';\nexport const PANEL_BG = 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/koi-product-rec-bg.jpg';\n\nexport const REASON_HEADLINE = {\n  default: 'Why are you looking for CBD?',\n  pet: 'Why are you looking for CBD for your pet?'\n};\n\nexport const REASON_OPTIONS = {\n  default: [\n    { name: 'Stress / Anxiety', icon: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/stress-icon.png' },\n    { name: 'Sleep', icon: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/sleep-icon.png' },\n    { name: 'Energy', icon: 'https://koicbd.com/wp-content/uploads/cbd-for-energy.png' },\n    { name: 'Aches & Pains', icon: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/aches-icon.png' },\n    { name: 'Skincare', icon: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/skincare-icon.png' },\n    { name: 'Relaxation', icon: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/relax-icon.png' },\n    { name: 'General Wellness', icon: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/wellness-icon.png' },\n  ],\n  pet: [\n    { name: 'Stress / Anxiety', icon: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/stress-icon.png' },\n    { name: 'Aches & Pains', icon: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/aches-icon.png' },\n    { name: 'General Wellness', icon: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/wellness-icon.png' },\n  ]\n};\n\nexport const FEATURE_OPTIONS = {\n  default: [\n    'Apply to Skin',\n    'Vape',\n    'Take Orally',\n  ],\n  pet: [\n    'Convenience',\n    'Can be added to pet food or treats',\n  ],\n};\n\nexport const PRODUCT_ASSOCIATIONS = {\n  default: {\n    'Tincture - Flavored': {\n      id: [205342, 205366, 205491],\n      sku: '',\n      reasons: [0, 1, 2, 5, 6],\n      features: [2],\n      url: '/cbd-tinctures?flavored=true',\n      description: 'Find out why people around the world are using Koi Naturals full-spectrum CBD oils every day to restore balance to their lives.',\n      image: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/results-fpo.jpg',\n      weights: {}\n    },\n    'Tincture - Unflavored': {\n      id: [205502],\n      sku: '',\n      reasons: [0, 1, 2, 5, 6],\n      features: [2],\n      url: '/product/koi-naturals-natural/',\n      description: 'Find out why people around the world are using Koi Naturals full-spectrum CBD oils every day to restore balance to their lives.',\n      image: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-natural.jpg',\n      weights: {}\n    },\n    'Gummies - Regular or Sour': {\n      id: [30240],\n      sku: '',\n      reasons: [0, 1, 5, 6],\n      features: [2],\n      url: '/product/cbd-gummies/',\n      description: 'CBD edibles with delectable flavors provide an even consistency of CBD to restore balance naturally.',\n      image: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-edible.jpg',\n      weights: {}\n    },\n    'Wellness Shots': {\n      id: [559149],\n      reasons: [0,1,2,5,6],\n      features: [2],\n      url: '/product/koi-cbd-shots/',\n      description: 'Koi Wellness Shots offer the highest-quality hemp extract available, with each delivering 25mg of CBD per 2.5-ounce bottle. For a tasty wellness shot, try Watermelon or Raspberry Punch. Each is perfectly designed to bring balance to your day in the most convenient and refreshing way. If you’re searching for a great night’s sleep, our Peach Iced Tea flavor is what you’re looking for. It carries 25mg of CBD goodness combined with melatonin to calm your mind and body so that you can get the rest you’re looking for.',\n      image: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-lotion.jpg',\n      weights: {}\n    },\n    'Vape Juice - Flavored': {\n      id: [30193, 30198, 30202, 30211, 30217],\n      reasons: [0, 5],\n      features: [1],\n      url: '/cbd-vape?flavored=true',\n      description: 'Enjoy an even distribution of CBD throughout your day. Vape them on their own or add to other e-liquids. Available in 7 awesome flavors.',\n      image: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-vape.jpg',\n      weights: {\n        features: {\n          1: 4\n        }\n      }\n    },\n    'Vape Juice - Unflavored': {\n      id: [30207],\n      sku: '',\n      reasons: [0, 5],\n      features: [1],\n      url: '/product/white-koi-cbd/',\n      description: 'Enjoy an even distribution of CBD throughout your day. Vape them on their own or add to other e-liquids.',\n      image: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-natural-vape.jpg',\n      weights: {\n        features: {\n          1: 4\n        }\n      }\n    },\n    'Healing Balm': {\n      id: [424649, 503515],\n      reasons: [3],\n      features: [0],\n      url: '/cbd-topicals?balm_only=true',\n      description: 'Relax and rejuvenate with all-purpose CBD topicals. Perfect for promoting beautiful, naturally healthy skin.',\n      image: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-balm.jpg',\n      weights: {\n        category: 1,\n        reasons: {\n          3: 1.5\n        },\n      }\n    },\n    'Koi Lotion' : {\n      id: [559149],\n      reasons: [4],\n      features: [0],\n      url: '/product/lavender-koi/',\n      description: 'Relax and rejuvenate with all-purpose CBD topicals. Perfect for promoting beautiful, naturally healthy skin.',\n      image: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-lotion.jpg',\n      weights: {}\n    },\n  },\n  pet: {\n    'Pet Spray' : {\n      id: [168056],\n      sku: 'PETSPRY',\n      reasons: [],\n      features: [1],\n      url: '/product/koi-naturals-pet/',\n      description: 'Specially formulated to give your pet nutrition, combined with all the benefits of full-spectrum CBD.',\n      image: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-spray.jpg',\n      weights: {}\n    },\n    'Soft Pet Chews' : {\n      id: [116376],\n      sku: 'KPTSCHEWS',\n      reasons: [],\n      features: [0],\n      url: '/product/koi-cbd-soft-chews/',\n      description: 'Specially formulated to give your pet nutrition, combined with all the benefits of full-spectrum CBD.',\n      image: 'https://cdn2.hubspot.net/hubfs/5273025/mag/KOI/square-chews.jpg',\n      weights: {}\n    },\n  },\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Headline, BodyText, Button } from './Base';\nimport LazyImage from './LazyImage';\nimport PanelWrap from './PanelWrap';\nimport { INTRO_BG } from '../constants';\n\nconst PanelBg = <LazyImage className=\"k-fshero--intro-bg\" src={INTRO_BG} />;\n\nconst IntroPanel = ({\n  direction,\n  setMinHeight,\n  screenSize,\n  onPrimaryClick,\n  onSecondaryClick }) => (\n  <PanelWrap \n    direction={direction}\n    screenSize={screenSize}\n    setMinHeight={setMinHeight}\n    panelType=\"intro\"\n    PanelBg={PanelBg}>\n    <Headline size=\"lg\">Welcome To The Koi CBD Product Finder</Headline>\n    <BodyText>I'm interested in CBD products for...</BodyText>\n    <div className=\"k-hero--action\">\n      <Button \n        anchor={false} \n        variant=\"primary\"\n        onClick={onPrimaryClick}>Myself or a Loved One &rarr;</Button>\n      <Button \n        anchor={false} \n        variant=\"secondary\"\n        onClick={onSecondaryClick}>My Pet &rarr;</Button>\n    </div>\n  </PanelWrap>\n);\n\nIntroPanel.defaultProps = {\n  onPrimaryClick: () => {},\n  onSecondaryClick: () => {},\n};\n\nIntroPanel.propTypes = {\n  onPrimaryClick: PropTypes.func,\n  onSecondaryClick: PropTypes.func,\n};\n\nexport default IntroPanel;\n","import React from 'react';\nimport { motion } from 'framer-motion';\nimport { Button } from './Base';\nimport { BUTTON_VARIANTS } from '../lib/motion';\n\nconst PanelButton = ({ disabled, onNextClick, children }) => (\n  <div className=\"k-fshero--btn\">\n    <motion.div \n      variants={BUTTON_VARIANTS} \n      initial={false}\n      animate={disabled ? 'hide' : 'show'}>\n      <Button \n        anchor={false} \n        variant=\"primary\"\n        disabled={disabled}\n        onClick={onNextClick}>{ children }</Button>\n    </motion.div>\n  </div>\n);\n\nexport default PanelButton;\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { Headline } from './Base';\nimport PanelButton from './PanelButton';\nimport PanelWrap from './PanelWrap';\nimport { checklistChangeHandler, classnames } from '../lib/utilities';\nimport { REASON_OPTIONS, REASON_HEADLINE } from '../constants';\n\nconst ReasonPanel = ({ \n  direction, \n  mode, \n  screenSize, \n  reasons, \n  setReasons, \n  setMinHeight, \n  onNextClick \n}) => {\n  const focusIndex = useRef(null);\n  const focusHandler = index => focusIndex.current = index;\n  \n  return (\n    <PanelWrap\n      direction={direction}\n      screenSize={screenSize}\n      setMinHeight={setMinHeight}\n      panelType=\"reason\">  \n      <Headline size=\"md\">{ REASON_HEADLINE[mode] }</Headline>\n      <ul className=\"k-reasons--list\">\n        {REASON_OPTIONS[mode].map((reason, i) => \n        <li key={i} className={classnames({'k-active': reasons.indexOf(reason.name) > -1})}>\n          <label htmlFor={`reason-${i}`}>\n            <input \n              id={`reason-${i}`} \n              type=\"checkbox\"\n              checked={reasons.indexOf(reason.name) > -1}\n              onFocus={_ => focusHandler(i)}\n              onChange={_ => checklistChangeHandler(reason.name, reasons, updated => setReasons(updated))} />\n            <div className=\"k-reason--icon\">\n              <figure>\n                <span className=\"k-reason--icon-bg\"></span>\n                <span className=\"k-reason--icon-img\" style={{ backgroundImage: `url(${reason.icon})` }}></span>\n              </figure>\n            </div>\n            <div className=\"k-reason--title\">\n              <h5>{reason.name}</h5>\n            </div>\n          </label>\n        </li>)}\n      </ul>\n      <PanelButton \n        disabled={reasons.length === 0} \n        onNextClick={onNextClick}>\n        Next &rarr;\n      </PanelButton>\n    </PanelWrap>\n  );\n};\n\n\nReasonPanel.defaultProps = {\n  setReasons: () => {},\n  onNextClick: () => {},\n};\n\nReasonPanel.propTypes = {\n  reasons: PropTypes.array.isRequired,\n  setReasons: PropTypes.func,\n  onNextClick: PropTypes.func,\n};\n\nexport default ReasonPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Headline } from './Base';\nimport PanelButton from './PanelButton';\nimport PanelWrap from './PanelWrap';\nimport { checklistChangeHandler, classnames } from '../lib/utilities';\nimport { FEATURE_OPTIONS } from '../constants';\n\nconst FeaturePanel = ({\n  direction,\n  mode,\n  screenSize,\n  features,\n  setFeatures,\n  setMinHeight,\n  onNextClick }) => (\n  <PanelWrap\n    direction={direction}\n    screenSize={screenSize}\n    setMinHeight={setMinHeight}\n    panelType=\"feature\">\n    <Headline size=\"md\">How do you want to use CBD?</Headline>\n    <ul className=\"k-reasons--list\">\n      {FEATURE_OPTIONS[mode].map((feature, i) => \n      <li key={i} className={classnames({'k-active': features.indexOf(feature) > -1})}>\n        <label htmlFor={`feature-${i}`}>\n          <input\n            id={`feature-${i}`} \n            type=\"checkbox\"\n            checked={features.indexOf(feature) > -1}\n            onChange={_ => checklistChangeHandler(feature, features, updated => setFeatures(updated))} />\n          <div className=\"k-feature--icon\">\n            <span>0{i + 1}</span>\n          </div>\n          <div className=\"k-reason--title\">\n            <h5>{feature}</h5>\n          </div>\n        </label>\n      </li>)}\n    </ul>\n    <PanelButton \n      disabled={features.length === 0}\n      onNextClick={onNextClick}>\n      Get Results &rarr;\n    </PanelButton>\n  </PanelWrap>\n);\n\nFeaturePanel.defaultProps = {\n  onNextClick: () => {},\n};\n\nFeaturePanel.propTypes = {\n  features: PropTypes.array.isRequired,\n  setFeatures: PropTypes.func.isRequired,\n  onNextClick: PropTypes.func,\n};\n\nexport default FeaturePanel;\n","import { \n  FEATURE_OPTIONS, \n  REASON_OPTIONS, \n  PRODUCT_ASSOCIATIONS,\n} from '../constants';\n\n\n// return an array of matched reason/feature indexes\nconst getGroupMatches = (options, chosen, indexes) => {\n  const indexMatches = chosen.map(item => {\n    const index = options.indexOf(item);\n    const matchIndex = indexes.indexOf(index);\n    return matchIndex > -1 ? index : matchIndex;\n  });\n  return indexMatches.filter(i => i > -1);\n};\n\nconst getWeightedMatches = (categoryName, associations, matches, type) => {\n  let resultWeight = 1;\n  const weightsByType = associations[categoryName].weights[type];\n  if (weightsByType) {\n    // calc weight value based on # of total options for category\n    // return a value that can be used in final calc as a multiplier\n    const weightsGroup = matches.map(match => {\n      const weightsIndex = match.toString();\n      return weightsByType[weightsIndex];\n    });\n    // get the average by group\n    resultWeight = weightsGroup.reduce((a, b) => a + b, 0) / weightsGroup.length;\n\n    // console.log('Type: ', type);\n    // console.log('Category', categoryName);\n    // console.log('Matches: ', matches);\n    // console.log('Weights: ', weightsByType);\n    // console.log('Weights array: ', weightsGroup);\n    // console.log('Average: ', averageWeight);\n  } \n  return resultWeight;\n};\n\n\n// return a 0 - 100 relevance score per product\nexport const getRecommendedProducts = (productData, reasons, features, mode) => {\n  // constants keys match mode\n  const associations = PRODUCT_ASSOCIATIONS[mode];\n  const reasonOptions = REASON_OPTIONS[mode].map(opt => opt.name);\n  const featureOptions = FEATURE_OPTIONS[mode];\n\n  // keys for iterating/sorting\n  const assocKeys = Object.keys(associations);\n\n  // get relevance score of each product group\n  const matchRelevance = assocKeys.reduce((result, key) => {\n    const reasonIndexes = associations[key].reasons;\n    const featureIndexes = associations[key].features;\n\n    const reasonMatches = getGroupMatches(reasonOptions, reasons, reasonIndexes);\n    const featureMatches = getGroupMatches(featureOptions, features, featureIndexes);\n\n    const reasonWeight = getWeightedMatches(key, associations, reasonMatches, 'reasons');\n    const featureWeight = getWeightedMatches(key, associations, featureMatches, 'features');\n\n    const reasonTotal = reasonMatches.length * reasonWeight;\n    const featureTotal = featureMatches.length * featureWeight;\n\n    result[key] = (reasonTotal + featureTotal) / (reasonIndexes.length + featureIndexes.length);\n    return result;\n  }, {});\n\n  console.log('Match Relevance: ', matchRelevance);\n\n  // order groups by relevance\n  const matchGroupsOrdered = [ ...assocKeys ];\n  matchGroupsOrdered.sort((a, b) => matchRelevance[b] - matchRelevance[a]);\n\n  console.log('Matching groups: ', matchGroupsOrdered)\n\n  // all product id's in order\n  const orderedProductIds = matchGroupsOrdered.reduce((result, key, i) => {\n    if (i === 0) return result;\n    return [ ...result, ...associations[key].id ];\n  }, []);\n\n  // most relevant group match (used in hero)\n  const { description, url, image } = associations[matchGroupsOrdered[0]];\n  \n  // hero + product info\n  return {\n    hero: { heading: matchGroupsOrdered[0], description, url, image },\n    products: orderedProductIds.map(id => {\n      const [idMatch] = productData.filter(product => id === product.ID);\n      return idMatch;\n    }),\n  };\n};","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useRef, useEffect, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { Inner, Headline, Button } from './Base';\nimport LazyImage from './LazyImage';\nimport { getRecommendedProducts } from '../lib/recommendation';\nimport { PANEL_MOTION_VARIANTS } from '../lib/motion';\nimport { getScreenSize } from '../lib/utilities';\n\nconst parseProductData = () => {\n  const script = document.getElementById('k-products-data');\n  return JSON.parse(script.textContent);\n};\n\nconst getCardMultiplier = () => {\n  const screenWidth = getScreenSize().width;\n  const bp = {\n    inner: {width: 1},\n    mobile: {width: 0, cardMinWidth: .765},\n    sm: {width: 580, cardMinWidth: .405},\n    md: {width: 767, cardMinWidth: .333},\n    lg: {width: 992, cardMinWidth: .225},\n  };\n\n  const { inner, mobile, sm, md, lg } = bp;\n  switch (true) {\n    case (screenWidth < sm.width): {\n      return inner.width / mobile.cardMinWidth;\n    }\n    case (screenWidth > sm.width && screenWidth < md.width): {\n      return inner.width / sm.cardMinWidth;\n    }  \n    case (screenWidth > md.width && screenWidth < lg.width): {\n      return inner.width / md.cardMinWidth;\n    }\n    case (screenWidth > lg.width): {\n      return inner.width / lg.cardMinWidth;\n    }\n    default: {\n      console.warn('default case');\n      return 1;\n    }\n  };\n};\n\nconst ResultsPanel = ({ direction, mode, reasons, screenSize, features, setMinHeight }) => {\n  const panelRef = useRef();\n  const productCards = useRef([]);\n  const productData = useRef(parseProductData());\n\n  useEffect(() => {\n    setMinHeight(panelRef.current.offsetHeight);\n  }, [screenSize]);\n\n  const { hero, products } = getRecommendedProducts(productData.current, reasons, features, mode);\n\n  // these aren't tagged with a product type, so this is the best bet for now\n  const isVapeRec = hero.heading.includes('Vape');\n  const nonVapeProducts = products.filter(product => !product.Name.includes('Vape'));\n\n  const maxSlideDistance = useMemo(() => {\n    const { current } = productCards;\n    let cardWidth = 0;\n    let accumulator = 0;\n    const cardMultiplier = getCardMultiplier();\n    current.forEach(el => {\n      cardWidth = el.offsetWidth;\n      accumulator += el.offsetWidth;\n    });\n    accumulator -= (cardWidth * cardMultiplier);\n    return -accumulator;\n  }, [productCards.current]);\n\n  return (\n    <motion.div\n      className=\"k-fshero--panel k-fshero--result\"\n      variants={PANEL_MOTION_VARIANTS}\n      custom={direction}\n      initial=\"initial\"\n      animate=\"animate\"\n      exit=\"exit\">\n      <div className=\"k-fshero--result-parent\" ref={panelRef}>\n        \n        {hero &&\n        <div className=\"k-fshero--results-hero\">\n          <div className=\"k-resulthero--top-img\">\n            <figure>\n              <LazyImage className=\"k-fshero--intro-bg\" src={hero.image} />\n            </figure>\n          </div>\n          <div className=\"k-resulthero--top-info\">\n            <div className=\"k-resulthero--top-liner\">\n              <small>Your Results Are In:</small>\n              <Headline tag=\"h1\" size=\"md\">{hero.heading}</Headline>\n              <p>{hero.description}</p>\n              <div className=\"k-resulthero--top-btn\">\n                <Button variant=\"primary\" anchor href={hero.url}>Shop Now &rarr;</Button>\n                <span>Scroll For More</span>\n              </div>\n              <small className=\"k-resulthero--disclaimer\">\n                FDA Disclaimer: This product is not intended to diagnose, treat, cure or prevent any disease.\n              </small>\n            </div>\n          </div>\n        </div>}\n\n        {products && \n        <div className=\"k-fshero--results-body\">\n          <Inner size=\"md\">\n            <Headline tag=\"h1\" size=\"md\">Based on your responses, we recommend</Headline>\n          </Inner>\n          <Inner size=\"md\">\n            <div className=\"k-fsresults--related\">\n              <motion.div\n                className=\"k-fsresults--slider\"\n                drag=\"x\"\n                dragConstraints={{ right: 0, left: maxSlideDistance }}\n              >\n                {isVapeRec && products.map((product, i) => \n                  <div key={i} className=\"k-productcard\" ref={ref => {productCards.current[i] = ref}}>\n                    <div className=\"k-productcard--liner\">\n                      <figure className=\"k-figure\">\n                        <img src={product.Images.split(',')[0]} alt={product.Name} />\n                      </figure>\n                      <div className=\"k-productcard--title\">\n                        <h3 className=\"k-headline k-headline--fake k-weight--lg\">{product.Name}</h3>\n                      </div>\n                      <div className=\"k-productcard--action\">\n                        <a href={product.LinkToProduct} className=\"k-button k-button--default\">Buy Now</a>\n                      </div>\n                    </div>\n                  </div>)\n                }\n\n                {!isVapeRec && nonVapeProducts.map((product, i) => \n                <div key={i} className=\"k-productcard\" ref={ref => {productCards.current[i] = ref}}>\n                  <div className=\"k-productcard--liner\">\n                    <figure className=\"k-figure\">\n                      <img src={product.Images.split(',')[0]} alt={product.Name} />\n                    </figure>\n                    <div className=\"k-productcard--title\">\n                      <h3 className=\"k-headline k-headline--fake k-weight--lg\">{product.Name}</h3>\n                    </div>\n                    <div className=\"k-productcard--description\">\n                      <p>{product.description}</p>\n                    </div>\n                    <div className=\"k-productcard--action\">\n                      <a href={product.LinkToProduct} className=\"k-button k-button--default\">Buy Now</a>\n                    </div>\n                  </div>\n                </div>)}\n              </motion.div>\n            </div>\n          </Inner>\n        </div>}\n\n      </div>\n    </motion.div>\n  );\n};\n\nexport default ResultsPanel;\n","import React from 'react';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { Inner } from './Base';\nimport { FIXED_CONTROLS_VARIANTS, CONTENT_MOTION_TRANSITION } from '../lib/motion';\n\nconst FixedControls = ({ activeIndex, panelType, onBackClick, onStartOver }) => {\n\n  return (\n    <motion.div\n      variants={FIXED_CONTROLS_VARIANTS}\n      transition={CONTENT_MOTION_TRANSITION}\n      initial=\"initial\"\n      animate=\"animate\"\n      exit=\"exit\">\n      <div className=\"k-fshero--fixed\">\n        <Inner size=\"lg\">\n\n        <AnimatePresence>\n          {panelType !== 'result' &&\n          <motion.div\n            key=\"btns-initial\"\n            className=\"k-fshero--fixed-btns\"\n            initial={{ opacity: 0, y: -50 }}\n            animate={{ opacity: 1, y: 0, position: 'relative' }}\n            exit={{ opacity: 0, y: -50, position: 'absolute' }}\n            transition={CONTENT_MOTION_TRANSITION}>\n            <button \n              type=\"button\" \n              className=\"k-fshero--back\"\n              onClick={onBackClick}>&larr; Back</button>\n            <div className=\"k-fshero--current\">\n              <span>0{activeIndex}</span> / <span>02</span>\n            </div>\n          </motion.div>}\n        </AnimatePresence>\n\n        <AnimatePresence>\n          {panelType === 'result' &&\n          <motion.div\n            key=\"btns-result\"\n            className=\"k-fshero--fixed-btns\"\n            initial={{ opacity: 0, y: 50 }}\n            animate={{ opacity: 1, y: 0, position: 'relative' }}\n            exit={{ opacity: 0, y: -50, position: 'absolute' }}\n            transition={CONTENT_MOTION_TRANSITION}>\n            <button\n              type=\"button\"\n              className=\"k-fshero--back\"\n              onClick={onStartOver}>&larr; Start Over</button>\n          </motion.div>}\n        </AnimatePresence>\n\n        </Inner>\n      </div>\n    </motion.div>\n  );\n};\n\nexport default FixedControls;\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { AnimatePresence } from 'framer-motion';\nimport IntroPanel from './components/IntroPanel';\nimport ReasonPanel from './components/ReasonPanel';\nimport FeaturePanel from './components/FeaturePanel';\nimport ResultsPanel from './components/ResultsPanel';\nimport FixedControls from './components/FixedControls';\nimport { getScreenSize } from './lib/utilities';\nimport { PANEL_TYPES, PANEL_BG }  from './constants';\n\n\nconst App = () => {\n  const [loaded, setLoaded] = useState(false);\n  const [panelType, setPanelType] = useState('intro');\n  const [mode, setMode] = useState('default'); // default, or pet\n  const [reasons, setReasons] = useState([]);\n  const [features, setFeatures] = useState([]);\n  const [minHeight, setMinHeight] = useState('none');\n  const [direction, setDirection] = useState('none'); // none, next, or prev\n  const [screenSize, setScreenSize] = useState(getScreenSize());\n\n  const activeIndex = useMemo(() => PANEL_TYPES.indexOf(panelType), [panelType]);\n  const showControls = useMemo(() => activeIndex > 0 && activeIndex <= PANEL_TYPES.length, [activeIndex]);\n\n  const timeout = useRef(null);\n  useEffect(() => {\n    if (!loaded) {\n      window.addEventListener('load', () => setLoaded(true));\n      window.addEventListener('resize', () => {\n        if (timeout.current) window.clearTimeout(timeout.current);\n        timeout.current = window.setTimeout(() => {\n          setScreenSize(getScreenSize());\n        }, 350);\n      });\n    }\n  }, []);\n\n  const goToPanel = (e, panel, direction = 'next') => {\n    e.preventDefault();\n    setDirection(direction);\n    setPanelType(panel);\n  };\n  const switchMode = (e, mode) => {\n    setMode(mode);\n    goToPanel(e, 'reason', 'next');\n  };\n  const resetAll = e => {\n    e.preventDefault();\n    setReasons([]);\n    setFeatures([]);\n    setMode('default');\n    goToPanel(e, 'intro', 'prev');\n  };\n\n  const passThroughProps = { direction, mode, setMinHeight, screenSize };\n  \n  return (\n    <section \n      className={`k-fshero k-fshero-panel-${panelType} k-fshero-mode-${mode}`} \n      style={{ minHeight, backgroundImage: `url(${PANEL_BG})` }}>\n      {showControls &&\n      <FixedControls\n        key=\"controls\"\n        activeIndex={activeIndex}\n        panelType={panelType}\n        onStartOver={e => resetAll(e)}\n        onBackClick={e => goToPanel(e, PANEL_TYPES[activeIndex - 1], 'prev')} />}\n      {loaded &&\n      <AnimatePresence custom={direction}>\n        {(panelType === 'intro' &&\n          <IntroPanel\n            {...passThroughProps}\n            key=\"intro\"\n            onPrimaryClick={e => switchMode(e, 'default')}\n            onSecondaryClick={e => switchMode(e, 'pet')} />) ||\n        (panelType === 'reason' &&\n          <ReasonPanel\n            {...passThroughProps}\n            key=\"reason\"\n            reasons={reasons}\n            setReasons={setReasons}\n            onNextClick={e => goToPanel(e, 'feature')} />) ||\n        (panelType === 'feature' &&\n          <FeaturePanel\n            {...passThroughProps}\n            key=\"feature\"\n            features={features}\n            setFeatures={setFeatures}\n            onNextClick={e => goToPanel(e, 'result')} />) ||\n        (panelType === 'result' &&\n          <ResultsPanel\n            {...passThroughProps}\n            key=\"result\"\n            reasons={reasons}\n            features={features} />)}\n      </AnimatePresence>}\n    </section>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/app.sass';\n\nconst root = document.getElementById('k-product-rec-root');\nReactDOM.render(<App />, root);\n"],"sourceRoot":""}